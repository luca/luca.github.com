!function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],d=0,h=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(p&&p(t);h.length;)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={0:0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var p=l;o.push([198,1]),n()}({151:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(87),s=a(n(209)),r=n(210);class l{constructor(e,t){this.provinceClicked=new o.SyncEvent,this.regionClicked=new o.SyncEvent,this.provinceOver=new o.SyncEvent,this.regionOver=new o.SyncEvent,this.provinceOut=new o.VoidSyncEvent,this.regionOut=new o.VoidSyncEvent,this._highlightedFeatures={hovered:{},selected:{}},this._onProvinceClick=e=>{if(!e.features||!e.features.length)return;const t=e.features[0];t&&this.provinceClicked.post(t)},this._onProvinceMouseOver=e=>{var t,n;const i=null!==(n=null===(t=e.features)||void 0===t?void 0:t[0])&&void 0!==n?n:null;if(i)return this.provinceOver.post(i);this.provinceOut.post()},this._onProvinceMouseLeave=()=>{this.provinceOut.post()},this._element=e,this._config=t}static create(e,t){return i(this,void 0,void 0,(function*(){const n=new l(e,t);return yield n._init(),n}))}setLayerData(e,t){if(!this._map)return;const n=this._map.getLayer(e);t.forEach(e=>this._setFeatureState(n,e.id,{measure:e.value}))}update(){this._map&&(this._map.on("mousemove",l.PROVINCE_L,this._onProvinceMouseOver),this._map.on("mouseleave",l.PROVINCE_L,this._onProvinceMouseLeave),this._map.on("click",l.PROVINCE_L,this._onProvinceClick),this._map.setPaintProperty(l.REGION_L,"fill-opacity",0),this._map.setPaintProperty(l.PROVINCE_L,"fill-color",r.pmProvinceColor()),this._map.setPaintProperty(l.PROVINCE_LABELS_L,"text-opacity",r.pmProvinceLabelOpacity()),this._map.setPaintProperty(l.REGION_LABELS_L,"text-opacity",0),this._map.setPaintProperty(l.PROVINCE_BORDERS_L,"line-opacity",r.pmProvinceBordersOpacity()),this._map.setPaintProperty(l.REGION_BORDERS_L,"line-opacity",0))}hoverProvince(e){this._setPointer(!!e),this.highlightFeature(e,l.PROVINCE_BORDERS_L,"hovered")}highlightFeature(e,t,n){if(!this._map)return;if(this._highlightedFeatures[n][t]==e)return;const i=this._map.getLayer(t);this._setFeatureState(i,this._highlightedFeatures[n][t],{[n]:!1}),this._setFeatureState(i,e,{[n]:!0}),this._highlightedFeatures[n][t]=e}_setFeatureState(e,t,n){this._map&&t&&this._map.setFeatureState({sourceLayer:e.sourceLayer,source:e.source,id:t},n)}_init(){return i(this,void 0,void 0,(function*(){const e=window.innerWidth<600?[0,0,0,0]:[0,0,0,300];return s.default.accessToken=this._config.mapboxToken,this._map=new s.default.Map({container:this._element,style:this._config.mapboxStyleUrl,center:this._config.mapCenter,zoom:this._config.mapZoom,bounds:this._config.mapBounds,fitBoundsOptions:{padding:{top:e[0]+50,bottom:e[1]+50,left:e[2]+50,right:e[3]+50}}}),new Promise((e,t)=>{if(!this._map)return t();this._map.on("error",e=>t(e)),this._map.on("load",()=>{e()})})}))}_setPointer(e){this._map&&(this._map.getCanvas().style.cursor=e?"pointer":"default")}}t.MapGL=l,l.PROVINCE_L="province",l.PROVINCE_LABELS_L="province labels",l.PROVINCE_BORDERS_L="province borders",l.REGION_L="regioni",l.REGION_LABELS_L="regioni labels",l.REGION_BORDERS_L="regioni borders",l.REGION_COLOR="#333333",l.HOVERED_REGION_COLOR="#222222",l.UNDEFINED_COLOR="#666666"},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(21),a=n(17),o=n(96);t.COLOR_SCALE=new class{constructor(){this._lowColor="#343332",this._highColor="#ffc318",this._max=1,this._min=.002,this._interpolator=i.interpolateHcl(this._lowColor,this._highColor),this._scale=o.scaleLog().range([0,1]).clamp(!0)}getLowColor(){return this._lowColor}getHighColor(){return this._highColor}getTicks(){return[0,.005,.01,.05,.1,.5,.99]}getLabels(){return["0%","0.5%","1%","5%","10%","50%","99%","100%"]}getHexAtValue(e){var t,n;const i=this._interpolator(this.getScale()(e));return null!==(n=null===(t=a.color(i))||void 0===t?void 0:t.hex())&&void 0!==n?n:"#FF0000"}getSteps(){const e=[];return this.getTicks().forEach(t=>e.push(t,this.getHexAtValue(t))),e}getScale(){return this._scale.domain([this._min,this._max])}}},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToElement=function(e){const t=document.createElement("template");e=e.trim(),t.innerHTML=e;const n=t.content.firstChild;if(!n)throw new Error("No elements fond in html");return n}},190:function(e,t,n){"use strict";function i(e,t=2){return parseFloat(e.toPrecision(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.sigFig=i,t.formatPercent=function(e,t=2){return i(e*=100,t)+"%"}},198:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(199),o=i(n(288)),s=new a.App(o.default);s.init(),window.app=s},199:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(200),o=n(208),s=n(215),r=n(276),l=n(280);n(285);t.App=class{constructor(e){this._config=e,this._model=new a.Model(this._config),this._mapView=new o.MapView(document.body,this._model,this._config),this._panel=new s.DataPanel(document.body,this._model,this._config),this._popup=new r.Popup(document.body,this._model,this._config),this._legend=new l.Legend(document.body,this._model,this._config),this._mapView.provinceClicked.attach(()=>this._panel.hide())}init(){return i(this,void 0,void 0,(function*(){yield Promise.all([this._model.loadData(),this._mapView.init()]),this._legend.update(),this._mapView.update(),this._panel.update(),this._popup.update()}))}}},200:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(134),o=n(87),s=n(206);t.Model=class{constructor(e){this.currentDateChanged=new o.SyncEvent,this.infectivityPeriodChanged=new o.SyncEvent,this.eventSizeChanged=new o.SyncEvent,this.factorChanged=new o.SyncEvent,this.currentProvinceIDChanged=new o.SyncEvent,this.hoveredProvinceIDChanged=new o.SyncEvent,this._provinceData=new Map,this._currentProvinceID=null,this._hoveredProvinceID=null,this._infectivityPeriod=10,this._eventSize=100,this._factor=2,this._isReady=!1,this._config=e}get isReady(){return this._isReady}get provinceList(){return Array.from(this._provinceData.values())}get datesList(){var e,t;return null!==(t=null===(e=this._dates)||void 0===e?void 0:e.slice(this._infectivityPeriod))&&void 0!==t?t:[]}getProvinceById(e){const t=this._provinceData.get(e);if(!t)throw new Error(`Province not found: ${e}`);return t}getCurrentDateIndex(){if(!this._currentDate)throw new Error(`Current date not found: ${this._currentDate}`);return this.datesList.findIndex(e=>e===this.getCurrentDate())}getCurrentDate(){if(!this._currentDate)throw new Error(`Current date not found: ${this._currentDate}`);return this._currentDate}setCurrentDate(e){var t;(null===(t=this._currentDate)||void 0===t?void 0:t.getTime())!==e.getTime()&&(this._currentDate=e,this.currentDateChanged.post(e))}setCurrentDateIndex(e){if(e>=this.datesList.length)throw new Error("Date index out of range");this.setCurrentDate(this.datesList[e])}nextDate(){return!this.isLastDate()&&(this.setCurrentDateIndex(this.getCurrentDateIndex()+1),!0)}isLastDate(){return this.getCurrentDate()===this.datesList[this.datesList.length-1]}getInfectivityPeriod(){return this._infectivityPeriod}setInfectivityPeriod(e){this._infectivityPeriod!==e&&(this._infectivityPeriod=e,this.infectivityPeriodChanged.post(e))}getEventSize(){return this._eventSize}setEventSize(e){this._eventSize!==e&&(this._eventSize=e,this.eventSizeChanged.post(e))}getFactor(){return this._factor}setFactor(e){this._factor!==e&&(this._factor=e,this.factorChanged.post(e))}setCurrentProvinceID(e){this._currentProvinceID=e,this.currentProvinceIDChanged.post(e)}getCurrentProvince(){if(this._currentProvinceID)return this.getProvinceById(this._currentProvinceID)}setHoveredProvinceID(e){this._hoveredProvinceID!==e&&(this._hoveredProvinceID=e,this.hoveredProvinceIDChanged.post(e))}getHoveredProvinceID(){return this._hoveredProvinceID}getHoveredProvince(){if(this._hoveredProvinceID)return this.getProvinceById(this._hoveredProvinceID)}getBBox(){return[0,0,0,0]}loadData(){return i(this,void 0,void 0,(function*(){let e;[this._provinceData,e]=yield Promise.all([this._loadProvinceData(),this._loadProvinceAnag()]),e.forEach(([e,t])=>this.getProvinceById(e).setPopulation(t));const t=new Set([...this._provinceData.values()].flatMap(e=>[...e.getDates().map(e=>e.getTime())]));this._dates=Array.from(t).sort((e,t)=>e-t).map(e=>new Date(e)),this._currentDate=this._dates[this._dates.length-1],this._isReady=!0}))}_loadProvinceData(){return i(this,void 0,void 0,(function*(){const e=this._config.provinceDataUrl,t=yield a.csv(e),n=new Map;return t.filter(e=>!!e.sigla_provincia).forEach(e=>{var t;const i=+(null!==(t=e.codice_provincia)&&void 0!==t?t:"");if(!i)throw new Error("No province id");let a=n.get(i);a||(a=new s.Province(e),n.set(i,a)),a.addReport(e)}),n}))}_loadProvinceAnag(){return i(this,void 0,void 0,(function*(){const e=this._config.provinceAnagUrl;return(yield a.csv(e)).map(e=>[+e.codice_provincia,+e.popolazione])}))}}},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(207);class a extends i.Entity{constructor(e){super();const t=this._checkRawData(e);if("ITA"!==t.stato)throw new Error("Unexpected country");this.stato=t.stato,this.codice_regione=+t.codice_regione,this.denominazione_regione=t.denominazione_regione,this.codice_provincia=+t.codice_provincia,this.denominazione_provincia=t.denominazione_provincia,this.sigla_provincia=t.sigla_provincia,this.lat=+t.lat,this.long=+t.long}get label(){return this.denominazione_provincia}get id(){return this.codice_provincia}addReport(e){const t=this._checkRawData(e),n=this._toDate(t.data);n.getMonth()<7||this.casesReports.set(n.getTime(),{data:n,cases:+t.totale_casi})}}t.Province=a,t.isProvince=function(e){return e instanceof a}},207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(96);t.Entity=class{constructor(){this.casesReports=new Map}getTotalCases(e){var t;return null===(t=this.casesReports.get(e.getTime()))||void 0===t?void 0:t.cases}setPopulation(e){this._population=e}getPopulation(){if(!this._population)throw new Error("Population not loaded yet.");return this._population}getActiveCasesSinceDays(e,t){var n,i;const a=null===(n=this.casesReports.get(e.getTime()))||void 0===n?void 0:n.cases,o=new Date(e.getTime());o.setDate(o.getDate()-t);const s=null===(i=this.casesReports.get(o.getTime()))||void 0===i?void 0:i.cases;if(void 0===a||void 0===s)throw new Error("Could not find cases");const r=a-s;return r<0?void 0:r}getDates(){return Array.from(this.casesReports.values()).map(e=>e.data)}getRisk(e,t=100,n=10,i=1){const a=this.getActiveCasesSinceDays(e,n);if(null==a)return;const o=a*i,s=this.getPopulation();return 1-Math.pow(1-o/s,t)}getRiskTimeline(e,t,n){return[...this.casesReports.values()].slice(t).map(i=>{const a=this.getRisk(i.data,e,t,n);return[i.data,a]}).sort((e,t)=>t[0].getTime()-e[0].getTime())}getRiskExtent(e,t,n){const i=this.getRiskTimeline(e,t,n).map(e=>e[1]);if(i.some(e=>void 0===e))throw new Error("Undefined values in measure");return[Math.min(...i),Math.max(...i)]}_checkRawData(e){return Object.keys(e).forEach(t=>{"note"!==t&&(e[t]||console.warn(`Missing value for ${t}`))}),e}_toDate(e){const t=i.timeParse("%Y-%m-%d")(e.slice(0,10));if(!t)throw new Error("Date could not be parsed");return t}}},208:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(151);n(211),n(213);const o=n(87);t.MapView=class{constructor(e,t,n){this.provinceClicked=new o.VoidSyncEvent,this._onProvinceOver=e=>{this._model.setHoveredProvinceID(e.id)},this._onProvinceOut=()=>{this._model.setHoveredProvinceID(null)},this._onProvinceClicked=()=>{this.provinceClicked.post()},this._container=e,this._model=t,this._config=n,this._model.currentDateChanged.attach(()=>this._onCurrentDateChanged()),this._model.factorChanged.attach(()=>this._onFactorChanged()),this._model.infectivityPeriodChanged.attach(()=>this._onDenominatorChanged()),this._model.eventSizeChanged.attach(()=>this._onAggregationChanged()),this._model.hoveredProvinceIDChanged.attach(e=>this._onHoveredProvinceIDChanged(e))}init(){return i(this,void 0,void 0,(function*(){const e=document.createElement("div");e.id="map",this._container.appendChild(e),this._mapGL=yield a.MapGL.create(e,this._config),this._mapGL.provinceClicked.attach(this._onProvinceClicked),this._mapGL.provinceOver.attach(this._onProvinceOver),this._mapGL.provinceOut.attach(this._onProvinceOut)}))}update(){if(!this._mapGL||!this._model.isReady)return;const e=this._model.getCurrentDate(),t=this._model.getEventSize(),n=this._model.getInfectivityPeriod(),i=this._model.getFactor(),o=this._model.provinceList.map(a=>{const o=a.getRisk(e,t,n,i)||0;return{id:a.codice_provincia,value:o}});this._mapGL.setLayerData(a.MapGL.PROVINCE_L,o),this._mapGL.update()}_onCurrentDateChanged(){this.update()}_onFactorChanged(){this.update()}_onDenominatorChanged(){this.update()}_onAggregationChanged(){this.update()}_onHoveredProvinceIDChanged(e){var t;null===(t=this._mapGL)||void 0===t||t.hoverProvince(e)}}},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(151),a=n(152);function o(){return["case",["==",["typeof",["feature-state","measure"]],"number"],["step",["number",["feature-state","measure"],0],...a.COLOR_SCALE.getSteps().slice(1)],i.MapGL.UNDEFINED_COLOR]}t.rmRegionColor=o,t.rmRegionOpacity=function(){return 1},t.rmRegionBorderOpacity=function(){return["case",["boolean",["feature-state","hovered"],!1],1,.1]},t.rmProvinceLabelOpacity=function(){return["interpolate",["linear"],["zoom"],8.5,0,9,.9]},t.rmRegionLabelOpacity=function(){return["interpolate",["linear"],["zoom"],8.5,.9,9,0]},t.rmProvinceBordersOpacity=function(){return["interpolate",["linear"],["zoom"],8.5,0,9,.2]};t.pmRegionColor=function(){return["case",["boolean",["feature-state","hovered"],!1],i.MapGL.HOVERED_REGION_COLOR,i.MapGL.REGION_COLOR]},t.pmRegionOpacity=function(){return 0},t.pmRegionBorderOpacity=function(){return["interpolate",["linear"],["zoom"],3.5,0,6,.1]},t.pmProvinceLabelOpacity=function(){return["interpolate",["linear"],["zoom"],4,0,4.5,.9]},t.pmRegionLabelOpacity=function(){return 0},t.pmProvinceBordersOpacity=function(){return["case",["boolean",["feature-state","hovered"],!1],1,.1]},t.pmProvinceColor=o},211:function(e,t,n){var i=n(26),a=n(212);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},s=(i(a,o),a.locals?a.locals:{});e.exports=s},212:function(e,t,n){(t=n(27)(!1)).push([e.i,"#map {\n    width: 100%;\n    height: 100%;\n}\n",""]),e.exports=t},215:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(153),o=i(n(216));n(217),n(222),n(224);const s=n(226),r=i(n(229));t.DataPanel=class{constructor(e,t,n){this._compact=!1,this._container=e,this._model=t,this._config=n,this._model.currentProvinceIDChanged.attach(()=>this._onProvinceIdChanged()),this._model.currentDateChanged.attach(()=>this._onDateChanged()),this._model.factorChanged.attach(()=>this._onFactorChanged()),this._model.eventSizeChanged.attach(()=>this._onEventSizeChanged()),this._model.infectivityPeriodChanged.attach(()=>this._onInfectivityPeriodChanged()),this._init()}update(){const e=this._model.getCurrentDate();this._factorMenu.setCurrentValue(this._model.getFactor()),this._infectivityPeriodMenu.setCurrentValue(this._model.getInfectivityPeriod()),this._eventSizeMenu.setCurrentValue(this._model.getEventSize()),this._lastUpdated.innerHTML=`Ultimo aggiornamento: ${Intl.DateTimeFormat().format(e)}`}hide(){this._setCompact(!0)}_init(){this._panel=a.htmlToElement(o.default),this._container.appendChild(this._panel),this._lastUpdated=this._panel.querySelector(".lastUpdated"),this._toggle=this._panel.querySelector(".hide"),this._toggle.addEventListener("click",()=>this._setCompact(!this._compact)),[...this._panel.querySelectorAll("nav a")].forEach((e,t,n)=>{e.addEventListener("click",i=>{n.forEach(e=>e.classList.remove("active")),e.classList.add("active"),this._panel.querySelector(".panes-wrapper").style.marginLeft=`-${100*t}%`,i.preventDefault()})});const e=this._panel.querySelector(".factorMenuContainer");this._factorMenu=new s.Slider(e),this._factorMenu.setData([6,2]),this._factorMenu.setLabelFn(e=>`1 su ${e}`),this._factorMenu.valueChange.attach(e=>this._model.setFactor(e));const t=this._panel.querySelector(".infectivityPeriodMenuContainer");this._infectivityPeriodMenu=new s.Slider(t),this._infectivityPeriodMenu.setData([7,10]),this._infectivityPeriodMenu.setLabelFn(e=>e+"gg"),this._infectivityPeriodMenu.valueChange.attach(e=>this._model.setInfectivityPeriod(e));const n=this._panel.querySelector(".eventSizeMenuContainer");this._eventSizeMenu=new s.Slider(n),this._eventSizeMenu.setData([10,25,50,100,500,1e3,5e3,1e4,2e4]),this._eventSizeMenu.valueChange.attach(e=>this._model.setEventSize(e)),new r.default(this._panel.querySelector(".controls"),{autoHide:!0}),new r.default(this._panel.querySelector(".about"),{autoHide:!0}),new r.default(this._panel.querySelector(".metodo"),{autoHide:!0}),new r.default(this._panel.querySelector(".credits"),{autoHide:!0})}_onProvinceIdChanged(){const e=this._model.getCurrentProvince();this._panel.classList.toggle("detail",!!e),this.update()}_onDateChanged(){this.update()}_onInfectivityPeriodChanged(){this.update()}_onEventSizeChanged(){this.update()}_onFactorChanged(){this.update()}_setCompact(e){this._compact=e,this._panel.classList.toggle("compact",this._compact)}}},216:function(e,t){e.exports='<div id="panel">\n    <div class="panes-header">\n        <a href="#" class="hide">&times;</a>\n        <h1>Eventi e Covid-19</h1>\n        <p>\n            Per una consapevolezza dell\'impatto di eventi con gruppi numerosi.\n        </p>\n        <nav>\n            <a href="#" class="active">Home</a>\n            <a href="#">Informazioni</a>\n            <a href="#">Metodo</a>\n            <a href="#">Credits</a>\n        </nav>\n    </div>\n    <span class="panes-wrapper">\n\n        <div class="pane controls">\n            <p style="margin-top: 15px;">\n                La mappa mostra una stima del rischio di essere esposti al virus SARS-CoV-2 sulla base del numero di persone che partecipano ad un evento. Il rischio è espresso come la probabilità che almeno un individuo positivo sia presente all\'evento.\n            </p>\n            <div class="eventSizeMenuContainer menuContainer">\n                <div class=\'menuLabel\'>Dimensioni evento (numero di persone)</div>\n            </div>\n            <div class="infectivityPeriodMenuContainer menuContainer">\n                <div class=\'menuLabel\'>Periodo di infettività</div>\n            </div>\n            <div class="factorMenuContainer menuContainer">\n                <div class=\'menuLabel\'>Percentuale infezioni rilevate</div>\n            </div>\n            <div class="lastUpdated"></div>\n        </div>\n\n        <div class="pane about">\n            <h3>La mappa</h3>\n            <p>La mappa mostra una stima del rischio di essere potenzialmente esposti al SARS-CoV-2 dato il numero di persone che partecipano ad un evento. Il rischio è espresso come la probabilità stimata (0-100%) che almeno 1 individuo positivo al SARS-CoV-2 sia presente durante l\'evento.</p>\n\n            <p>Il rischio di incontrare una persona affetta da COVID-19 (la malattia causata dal virus SARS-CoV-2) nello specifico comune dipende da tre fattori:</p>\n            <ol>\n                <li><span>La stima della prevalenza di casi nello specifico comune. Questo valore è dato dal numero di casi rilevato dal sistema di sorveglianza in un un intervallo che va dai 7 ai 10 giorni precedenti.</span></li>\n                <li><span>Il fattore di sottostima delle infezioni da parte del sistema di sorveglianza, che può essere variato tra 2 e 6, e introduce un fattore correttivo per stimare la reale prevalenza di infetti.</span></li>\n                <li><span>Il numero di partecipanti all\'evento.</span></li>\n            </ol>\n\n            <h3>Nota bene</h3>\n            <p>È importante sottolineare che il presente strumento non esprime la probabilità di contrarre l\'infezione da virus SARS-CoV-2, ma solo di essere ad un evento dove almeno un altro individuo è virus SARS-CoV-2 positivo. Il rischio riportato qui è una stima, ovviamente basata su dati imperfetti e dipende dalle assunzioni sulla prevalenza dei casi reali (per i dettagli vedere Metodo).</p>\n        </div>\n        <div class="pane metodo">\n            \n            <h3>Stima del rischio</h3>\n            <p>Qual è la probabilità che una persona che partecipa ad un evento o incontro sia positiva al SARS-CoV-2?</p>\n            <p>Per rispondere a questa domanda è più facile stimare la probabilità del contrario: se andiamo allo stadio a vedere una partita di calcio, qual è la possibilità che nessuno dei 50,000 spettatori sia infetto?</p>\n            \n            <p>Consideriamo ogni singolo spettatore. Se 1,000 dei circa 60 milioni di persone in Italia sono infette con il SARS-CoV2, la probabilità di non essere infetti può essere stimata come 59,999,000/60,000,000, ovvero una probabilità del 99.9983%. Una ottima prospettiva dal punto di vista di un solo individuo. In termini di scommesse parliamo di un evento favorevole 60,000 a 1. </p>\n            <p>Ora, qual è la probabilità che tutte le 50,000 persone non siano positive? Da un punto di vista di calcolo delle probabilità, ciò è analogo a vincere 50,000 scommesse contemporaneamente; nonostante ciascuna scommessa abbia una probabilità di vincita molto elevata, non è comunque semplice vincerle tutte. Questa probabilità si può calcolare moltiplicando quella di una singola vincita (0.999983...) per se stessa 50,000 volte. Quindi la probabilità di vincere tutte le scommesse diventa solo del 43%. In altre parole, la probabilità che almeno uno dei partecipanti risulti positivo al virus SARS-CoV-2 è pari al 57%.</p>\n            \n            <p>Per tutti gli esperti di probabilità, è bene specificare che questa stima contiene un alto numero di assunzioni. La prima che tutte le persone abbiano la stessa probabilità di infezione. La seconda è che la probabilità di avere SARS-CoV-2 per ogni individuo è indipendente dallo stato degli altri individui; questo non è vero per congiunti e appartenenti a nuclei familiari. Infine, noi usiamo una stima della prevalenza su base comunale. Tuttavia, analisi più precise devono tenere in conto che la prevalenza ha una eterogeneità geografica che varia di comune in comune. </p>\n            \n            <p>Inoltre, considerando queste assunzioni, la probabilità che un certo numero di persone positive al virus partecipi ad un dato evento è descritta da una distribuzione ipergeometrica; l\'uso di una distribuzione binomiale (come nell\'esempio sopra riportato) fornisce tuttavia un\'approssimazione particolarmente buona, dal momento che il numero di partecipanti all\'evento risulta molto più piccolo della popolazione totale.</p>\n            \n            <h3>Prevalenza</h3>\n            <p>Per avere una stima della prevalenza usiamo il numero totale di casi osservato tra 7 e 10 giorni prima della data dell\'evento. Questa stima è basata sul periodo infettivo dei contagiati da SARS-CoV-2 e il possibile ritardo nella loro identificazione. Bisogna notare che i casi rilevati vengono isolati ma molti non vengono identificati prontamente e/o verranno identificati nei giorni successivi. Inoltre bisogna sempre considerare l\'alto numero di infezioni che non vengono intercettate dal sistema sanitario. In Italia, seguendo l\'indagine sierologica ISTAT, nel primo periodo pandemico meno di 1 caso su 6 è stato identificato. La proporzione di casi non identificati durante i mesi estivi è sicuramente scesa, anche se al momento non esiste una stima precisa. Per questo lasciamo all\'utente la possibilità di considerare diversi scenari per la proporzione di sottostima dei casi reali.</p>\n            <p>Anche in questo caso bisogna specificare che la metodologia usa una stima della prevalenza attuale che è approssimata e dovrebbe essere raffinata attraverso modellizzazioni più precise. </p>\n            \n            <h3>Interpretazione della probabilità di rischio</h3>\n            <p>La probabilità di rischio calcolata in questa piattaforma deve essere interpretata come una stima approssimata del rischio reale. </p>\n            <p>La probabilità risultante deve essere quindi letta senza dare troppo peso a differenze dell\'ordine di pochi punti percentuali. </p>\n            <p>E\' importante sottolineare ancora una volta che la probabilità che riportiamo non esprime il rischio di contrarre la malattia, che dipende poi da fattori che considerano la lunghezza dell\'evento, lo spazio in cui si svolge e le misure di precauzione come mascherine e distanziamento. </p>\n        </div>\n        <div class="pane credits">\n\n            <a class="isilogo" href="https://isi.it" target="_blank"></a>\n            \n            <h3>Progetto e sviluppo</h3>\n            <ul>\n                <li>\n                    <span class="author">Corrado Gioannini</span>\n                    <span class="affiliation">Fondazione ISI</span>\n                </li>\n                <li>\n                    <span class="author">Daniela Paolotti</span>\n                    <span class="affiliation">Fondazione ISI</span>\n                </li>\n                <li>\n                    <span class="author">Marco Quaggiotto</span>\n                    <span class="affiliation">Politecnico di Milano / Fondazione ISI</span>\n                </li>\n                <li>\n                    <span class="author">Luca Rossi</span>\n                    <span class="affiliation">Fondazione ISI</span>\n                </li>\n                <li>\n                    <span class="author">Michele Tizzoni</span>\n                    <span class="affiliation">Fondazione ISI</span>\n                </li>\n                <li>\n                    <span class="author">Matteo Chinazzi</span>\n                    <span class="affiliation">Mobs Lab, Northeastern University</span>\n                </li>\n                <li>\n                    <span class="author">Alessandro Vespignani</span>\n                    <span class="affiliation">Mobs Lab, Northeastern University</span>\n                </li>\n                <li>\n                    <span class="author">Joshua Weitz</span>\n                    <span class="affiliation">Georgia Tech</span>\n                </li>\n            </ul>\n\n            <h3>Informazioni</h3>\n            <p>Per ulteriori informazioni contattare <a href="mailto:michele.tizzoni@isi.it" target="_blank">michele.tizzoni@isi.it</a> o <a href="mailto:daniela.paolotti@isi.it" target="_blank">daniela.paolotti@isi.it</a>\n            </p>\n\n            <h3>Cartografia e visualizzazione</h3>\n            <p>Interfaccia sviluppata da <a href="http://datainterfaces.org" target="_blank">DataInterfaces.org</a>, laboratorio sperimentale di collaborazione tra Politecnico di Milano e Fondazione ISI.\n            </p>\n\n            <h3>Fonti dati</h3>\n            <p><b><a href="https://github.com/pcm-dpc/COVID-19" target="_blank">Dati COVID-19 Italia</a></b> forniti dal Ministero della Salute. Elaborazione a cura del Dipartimento della Protezione Civile. CC-BY-4.0.<br>\n            <b><a href="http://dati.istat.it/Index.aspx?DataSetCode=DCIS_POPRES1" target="_blank">Dati demografici</a></b> a cura dell\'Istituto nazionale di statistica. CC-BY-3.0.<br>\n            <b><a href="https://www.openstreetmap.org/about/" target="_blank">Dati cartografici</a></b> © OpenStreetMap contributors. Licenza ODbL.\n            </p>\n\n            <h3>Acknowledgements</h3>\n            <p>Eventi e Covid-19 è un progetto ispirato al <a href="https://covid19risk.biosci.gatech.edu/" target="_blank">Covid-19 Event Risk Assessment Planning Tool</a> sviluppato da Dr. Joshua Weitz (Professor of Biological Sciences a Georgia Tech) e Dr. Clio Andris (Assistant Professor of City & Regional Planning and Interactive Computing at Georgia Tech) insieme ad altri ricercatori della Stanford University.</p>\n            <p>I ricercatori del Georgia Institute of Technology, Northeastern University e Fondazione ISI hanno creato una collaborazione internazionale per allargare a diversi paesi i modelli di stima del rischio COVID-19 nei grandi eventi. La creazione di nuove mappe per altri paesi del mondo verrà annunciata su <a href="https://covid19risk.biosci.gatech.edu/" target="_blank">covid19risk.biosci.gatech.edu</a>, da cui sarà possibile accedere alle singole piattaforme nazionali.</p>\n            <p>Per citare questo lavoro: Chande, A.T., Gussler, W., Harris, M., Lee, S., Rishishwar, L., Hilley, T., Jordan, I.K., Andris, C.M., and Weitz, J.S. \'Interactive COVID-19 Event Risk Assessment Planning Tool\', URL <a href="https://covid19risk.biosci.gatech.edu/" target="_blank">covid19risk.biosci.gatech.edu</a></p>\n            <p>Questa iniziativa è parzialmente finanziata dal progetto <a href="https://cordis.europa.eu/project/id/101003688" target="_blank">Epipose</a> (European Commission H2020-SC1-PHE-CORONAVIRUS-2020 call).</p>\n        </div>\n    </div>\n</div>\n'},217:function(e,t,n){var i=n(26),a=n(218);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},s=(i(a,o),a.locals?a.locals:{});e.exports=s},218:function(e,t,n){var i=n(27),a=n(154),o=n(219),s=n(220),r=n(221);t=i(!1);var l=a(o),c=a(s),p=a(r);t.push([e.i,"#panel {\n    width: 300px;\n    position: absolute;\n    color: black;\n    z-index: 101;\n    top: 20px;\n    bottom: 40px;\n    left: 20px;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 1);\n    border-radius: 3px;\n}\n\n#panel .hide {\n    display: none;\n}\n\n@media only screen and (max-width: 600px) {\n\n    #panel .hide {\n        display: block;\n        position: absolute;\n        right: 13px;\n        top: 13px;\n        text-decoration: none;\n        font-size: 30px;\n        color: rgba(255, 255, 255, 0.6);\n    }\n\n    #panel {    \n        bottom: 70px;\n    }\n\n    #panel.compact {\n        bottom: auto;\n        height: 50px;\n    }\n\n    #panel.compact .panes-header {\n        padding: 5px 20px !important;\n    }\n\n    #panel h1 {\n        bottom: auto;\n        height: 50px;\n    }\n\n}\n\n#panel nav {\n    margin-top: 20px;\n}\n\n\n#panel nav a {\n    color: rgba(255, 255, 255, 0.7);\n    font-size: 11px;\n    font-weight: 400;\n    margin: 0 10px 0 0;\n    padding: 0;\n    display: inline-block;\n    text-decoration: none;\n    border-bottom: 2px solid transparent;\n    text-transform: uppercase;\n    letter-spacing: -0.1px;\n}\n\n#panel nav a.active {\n    font-weight: 600;\n    color: white;\n    border-bottom: 2px solid white;\n} \n\n#panel .panes-header {\n    padding: 20px;\n    flex: 0 0 100px;\n    transition: margin-left 0.1s ease-in-out;\n    line-height: 1.6em;\n    background-color: var(--accent);\n    color: white;\n    position: relative;\n    box-shadow: 0 0 10px rgb(0 0 0 / 0.2);\n}\n\n#panel .panes-header P {\n    font-size: 14px;\n}\n\n#panel .panes-header h1 {\n    margin: 5px 0 23px 0;\n    font-style: normal;\n    font-weight: bold;\n    font-size: 25px;\n    line-height: 30px;\n    margin-bottom: 10px;\n}\n\n#panel p {\n    margin-top:0;\n}\n\n#panel .panes-wrapper {\n    flex: 1 1 auto;\n    overflow: hidden;\n    width: 400%;\n    transition: margin-left 0.5s ease-in-out;\n    background-color: #e4e0da;\n    font-size: 12px;\n    display: flex;\n}\n\n#panel .panes-wrapper h3 {\n    font-size: 12px;\n    margin: 15px 0 5px 0;\n    font-weight: bold;\n}\n\n#panel .panes-wrapper p {\n    margin-bottom: 5px;\n}\n\n#panel .panes-wrapper ol {\n    margin: 5px 0 10px 0;\n    padding: 0 0 0 12px;\n}\n\n#panel .panes-wrapper ol li {\n    font-weight: bold;\n}\n\n#panel .panes-wrapper ol li span {\n    font-weight: normal;\n}\n\n.menuContainer div {\n    display: inline-block;\n}\n\n.menuContainer .menuLabel {\n    width: 100%;\n    font-size: 12px;\n    letter-spacing: 0.3px;\n    margin: 10px 0 -2px 0;\n    font-weight: 600;\n}\n\n.pane .close {\n    color: white;\n    background-image: url("+l+");\n    display: block;\n    height: 17px;\n    background-size: 18px;\n    margin: -5px 0 20px 20px;\n    flex: 0 0 19px;\n    background-repeat: no-repeat;\n    width: 200px;\n    padding: 0 0 0 22px;\n    font-size: 9px;\n    font-family: Arial;\n    text-decoration: none;\n    text-transform: uppercase;\n    background-position: 0px 1px;\n    opacity: 0.7;\n    letter-spacing: 0.3px;\n    cursor: pointer;\n}\n\n.pane .close:hover {\n    opacity: 1;\n}\n\n.pane.credits ul {\n    padding: 0;\n    list-style: none;\n}\n\n.pane.credits li {\n    margin-bottom: 5px;\n}\n\n.pane.credits .author {\n    font-weight: 500;\n    display: block;\n    line-height: 12px;\n}\n\n.pane.credits .affiliation {\n    display: block;\n    color: #343332;\n}\n\n.pane.credits .isilogo {\n    background-image: url("+c+");\n    height: 50px;\n    width: 137px;\n    background-size: 153px;\n    background-repeat: no-repeat;\n    background-position: center center;\n    display: inline-block;\n    margin-right: 15px;\n    margin-top: 20px;\n}\n\n.pane.credits .nelogo {\n    background-image: url("+p+");\n    height: 50px;\n    width: 88px;\n    background-size: 116px;\n    background-repeat: no-repeat;\n    background-position: 50% 55%;\n    display: inline-block;\n}\n\n.pane a,\n.pane a:link,\n.pane a:visited,\n.pane a:active,\n.pane a:hover {\n    color: var(--accent);\n}\n\n.lastUpdated {\n    opacity: 0.5;\n}",""]),e.exports=t},219:function(e,t,n){"use strict";n.r(t),t.default="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjAuMiwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyNi4xIDI2LjMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI2LjEgMjYuMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjUsMTEuNkg2LjdsOC40LTguNEwxMywxLjFsLTEyLDEybDEyLDEybDIuMS0yLjFsLTguNC04LjRIMjVWMTEuNnoiLz4KPC9zdmc+Cg=="},220:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/ISI-Helvetica-bn.png?hash=0b2bb54073fa69962cbd"},221:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/NU_Wordmark_Bv.png?hash=18fe602363ed3944536a"},222:function(e,t,n){var i=n(26),a=n(223);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},s=(i(a,o),a.locals?a.locals:{});e.exports=s},223:function(e,t,n){(t=n(27)(!1)).push([e.i,".pane {\n    display: flex;\n    flex-direction: column;\n    float: left;\n    padding: 5px 20px 20px 20px;\n    overflow: auto;\n    flex: 0 0 25%;\n}\n\n.pane .scroll {\n    height: calc(100% - 34px);\n    padding: 0 20px;\n}\n\n.pane .header {\n    flex: 0 0 auto;\n    margin: 0 5px 20px 5px;\n}\n\n.pane .intro table {\n    width: 100%;\n    font-size: 11px;\n    line-height: 1.4em;\n    border-collapse: collapse;\n    margin-bottom: 20px;\n}\n\n.pane .intro table td {\n    padding: 0;\n}\n\n.pane .intro table td.value {\n    text-align: right;\n}",""]),e.exports=t},226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(87),a=n(290),o=n(96);n(227);t.Slider=class{constructor(e){this.valueChange=new i.SyncEvent,this._data=[],this._labelFn=e=>e.toString(),this._container=e,this._init()}setData(e){this._data=e,this._update()}setCurrentValue(e){this._currentValue=e,this._update()}setLabelFn(e){this._labelFn=e,this._update()}_update(){this._slider.max(this._data.length-1).value(this._currentValue?this._getIndexByValue(this._currentValue):0).marks(this._data.map((e,t)=>t)).tickFormat(e=>{var t;return this._labelFn(null===(t=this._data)||void 0===t?void 0:t[e])}).displayFormat(e=>{var t;return this._labelFn(null===(t=this._data)||void 0===t?void 0:t[e])}).tickValues(this._data.map((e,t)=>t)).displayValue(!0),this._svg.call(this._slider),this._adjustSlider()}_init(){const e=document.createElement("div");e.className="dropdown",this._slider=a.sliderBottom(o.scaleLinear()).min(0).width(230).displayValue(!0).handle(o.symbol().type(o.symbolCircle).size(80)()).on("onchange",e=>this._onSliderChange(e)),this._svg=o.create("svg").attr("viewBox","-15, -10, 260, 40").attr("width",260).attr("height",40).call(this._slider),e.appendChild(this._svg.node()),this._container.appendChild(e)}_onSliderChange(e){this.valueChange.post(this._data[e])}_getIndexByValue(e){return this._data.findIndex(t=>t===e)}_adjustSlider(){this._svg.selectAll(".tick line").attr("y2",1).attr("y1",-1).attr("stroke","black"),this._svg.selectAll(".tick text").attr("y",5).attr("fill","black"),this._svg.selectAll(".handle").attr("tabindex",null),this._svg.selectAll("g.parameter-value line").attr("opacity",0),this._svg.selectAll("g.parameter-value text").attr("y",12)}}},227:function(e,t,n){var i=n(26),a=n(228);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},s=(i(a,o),a.locals?a.locals:{});e.exports=s},228:function(e,t,n){(t=n(27)(!1)).push([e.i,".dropdown svg {\n    margin: 0 -5px;\n}\n\nline.track {\n    stroke-width: 0;\n}\n\nline.track-inset {\n    stroke-width: 3;\n    stroke: black;\n}\n\ng.parameter-value .handle {\n    stroke-width: 2;\n    fill: var(--accent);\n    stroke: #e4e0da;\n    transform: translateX(0.5px);\n}\n\ng.parameter-value text {\n    color: black;\n    font-weight: bold;\n}\n\ng.tick text {\n    color: black;\n}",""]),e.exports=t},276:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(153),o=i(n(277));n(278);const s=n(190),r=n(96);t.Popup=class{constructor(e,t,n){this._container=e,this._model=t,this._config=n,this._model.hoveredProvinceIDChanged.attach(()=>this.update()),this._model.factorChanged.attach(()=>this.update()),this._model.currentDateChanged.attach(()=>this.update()),this._model.eventSizeChanged.attach(()=>this.update()),this._model.infectivityPeriodChanged.attach(()=>this.update()),this._init(),this._setVisible(!0)}update(){const e=this._model.getCurrentDate(),t=this._model.getFactor(),n=this._model.getInfectivityPeriod(),i=this._model.getEventSize(),a=this._model.getHoveredProvince();if(a){const o=a.getRisk(e,i,n,t);this._title.innerHTML=`${a.label}`,this._riskLabel.innerHTML=`Probabilità che sia presente almeno un infetto<br>\n                                         in un gruppo di ${r.format(",")(i)} persone:`,this._riskValue.innerText=o?s.formatPercent(o):"N. D.",this._casesLabel.innerText=`Infezioni rilevate (${n}gg):`;const l=a.getActiveCasesSinceDays(e,n);this._casesValue.innerText=l?`${r.format(",")(l)} casi`:"N. D.",this._popLabel.innerText="Popolazione:",this._popValue.innerText=`${r.format(",")(a.getPopulation())} persone`,this._setVisible(!0)}else this._setVisible(!1)}_init(){this._popup=a.htmlToElement(o.default),this._container.appendChild(this._popup),this._title=this._popup.querySelector(".title"),this._chart=this._popup.querySelector(".chart"),this._riskLabel=this._popup.querySelector(".total .riskLabel"),this._riskValue=this._popup.querySelector(".total .risk"),this._casesLabel=this._popup.querySelector(".details .casesLabel"),this._casesValue=this._popup.querySelector(".details .cases"),this._popLabel=this._popup.querySelector(".details .popLabel"),this._popValue=this._popup.querySelector(".details .pop")}_setVisible(e){this._popup.classList.toggle("visible",e)}}},277:function(e,t){e.exports='<div id="popup">\n    <div>\n        <span class="title"></span>\n    </div>\n    <div class="total">\n        <span class="riskLabel"></span>\n        <span class="risk"></span>\n    </div>\n    <div class="details">\n        <span class="casesLabel"></span>\n        <span class="cases"></span><br>\n        \x3c!-- <span class="adjCasesLabel"></span>\n        <span class="adjCases"></span><br> --\x3e\n        <span class="popLabel"></span>\n        <span class="pop"></span>\n    </div>\n</div>\n'},278:function(e,t,n){var i=n(26),a=n(279);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},s=(i(a,o),a.locals?a.locals:{});e.exports=s},279:function(e,t,n){(t=n(27)(!1)).push([e.i,"#popup {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 300px;\n    background-color: var(--accent);\n    color: white;\n    z-index: 9;\n    font-size: 12px;\n    padding: 10px;\n    line-height: 1.6em;\n    opacity: 0;\n    box-shadow: 0 0 0 0 rgba(0,0,0,1);\n    transition: box-shadow, opacity 1s;\n    pointer-events: none;\n    border-radius: 3px;\n}\n\n#popup.visible {\n    opacity: 1;\n    box-shadow: 0 0 20px 0 rgba(0,0,0,0.3);\n}\n\n\n#popup .title {\n    color: white;\n    text-transform: uppercase;\n    font-weight: bold;\n    margin-bottom: 5px;\n    display: block;\n}\n\n#popup .details {    \n    line-height: 15px;\n}\n\n#popup .total {    \n    margin: 5px 0;\n    line-height: 15px;\n}\n\n#popup .total .riskLabel {\n    font-weight: bold;\n    text-transform: initial;\n}\n\n#popup .details {\n    opacity: 0.7;\n}\n\n\n#popup .risk {\n    font-weight: bold;\n    opacity: 0.7;\n}\n\n\n@media only screen and (max-width: 600px) {\n\n    #popup {\n        position: absolute;\n        top: 80px;\n        left: 20px;\n        width: 300px;\n    }\n\n}",""]),e.exports=t},280:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(152),o=n(10),s=n(46),r=i(n(289));n(281),n(283);const l=n(190);t.Legend=class{constructor(e,t,n){this._margins=[1,15,1,15],this._size=[330,22],this._container=e,this._model=t,this._config=n,this._model.currentDateChanged.attach(this,this.update),this._model.infectivityPeriodChanged.attach(this,this.update),this._model.eventSizeChanged.attach(this,this.update),this._model.factorChanged.attach(this,this.update),this._init()}update(){if(!this._model.isReady)return;const e=a.COLOR_SCALE.getTicks(),t=a.COLOR_SCALE.getLabels();this._rectsScale.domain([0,e.length]),this._rectsContainer.selectAll("rect.axis").data(e).join("rect").classed("axis",!0).attr("fill",e=>a.COLOR_SCALE.getHexAtValue(e)).attr("x",(e,t)=>this._rectsScale(t)).attr("width",this._rectsScale(1)-this._rectsScale(0)-1).attr("y",15).attr("height",5),this._labelsContainer.selectAll("text.axis").data(t).join("text").classed("axis",!0).attr("x",(e,t)=>this._rectsScale(t)).attr("y",10).text(e=>e)}_init(){this._plot=document.createElement("div"),this._plot.className="legend",this._container.appendChild(this._plot),this._buildPlot()}_buildPlot(){this._svg=o.select(this._plot).append("svg").attr("width",this._size[0]).attr("height",this._size[1]).append("g").attr("transform",`translate(${this._margins[3]},${this._margins[0]})`).style("shape-rendering","crispEdges"),this._rectsContainer=this._svg.append("g"),this._labelsContainer=this._svg.append("g"),this._border=this._svg.append("rect").attr("stroke","rgba(0, 0, 0, 0.3)").attr("fill","transparent").attr("x",0).attr("y",15).attr("width",this._size[0]-this._margins[1]-this._margins[3]).attr("height",5),this._rectsScale=s.scaleLinear().domain([0,1]).range([0,this._size[0]-this._margins[1]-this._margins[3]])}_showTooltip(e,t){r.default(t,{theme:"small"}),t._tippy.setContent(`${l.formatPercent(e)}`)}}},283:function(e,t,n){var i=n(26),a=n(284);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},s=(i(a,o),a.locals?a.locals:{});e.exports=s},284:function(e,t,n){(t=n(27)(!1)).push([e.i,".legend {\n    position: absolute;\n    bottom: 33px;\n    right: 5px;\n    z-index: 9;\n    user-select: none;\n}\n\n.legend circle {\n    fill: black;\n    opacity: 0.5;\n}\n\n.legend circle.hovered {\n    fill: white;\n}\n\n.legend text.axis {\n    font-size: 10px;\n    font-weight: bold;\n    fill: #ebcbea;\n    pointer-events: none;\n    text-anchor: middle;\n}\n\n\n.tippy-tooltip.legend-theme {\n    background-color: #ff2b68;\n    color: white;\n    font-size: 11px;\n    border-radius: 3px;\n    padding: 10px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n}\n\n.tippy-tooltip.legend-theme[data-placement^='top'] .tippy-arrow {\n    border-top-color: #ff2b68;\n}\n.tippy-tooltip.legend-theme[data-placement^='bottom'] .tippy-arrow {\n    border-bottom-color: #ff2b68;\n}\n.tippy-tooltip.legend-theme[data-placement^='left'] .tippy-arrow {\n    border-left-color: #ff2b68;\n}\n.tippy-tooltip.legend-theme[data-placement^='right'] .tippy-arrow {\n    border-right-color: #ff2b68;\n}\n\n@media only screen and (max-width: 600px) {\n\n    .legend {\n        right: auto;\n        left: 5px;\n    }\n\n}",""]),e.exports=t},285:function(e,t,n){var i=n(26),a=n(286);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},s=(i(a,o),a.locals?a.locals:{});e.exports=s},286:function(e,t,n){var i=n(27),a=n(154),o=n(287);(t=i(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap);"]);var s=a(o);t.push([e.i,":root {\n    --blue: #007bff;\n    --indigo: #6610f2;\n    --purple: #6f42c1;\n    --pink: #e83e8c;\n    --red: #dc3545;\n    --orange: #fd7e14;\n    --yellow: #ffc107;\n    --green: #28a745;\n    --teal: #20c997;\n    --cyan: #17a2b8;\n    /* --accent: #b61aae; */\n    --accent: #7068a0;\n}\n\n* {\n    box-sizing: border-box;\n}\n\nbody, html {\n    background-color: #191a1a;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    overflow: hidden;\n    font-family: 'Inter', sans-serif;\n    font-size: 12px;\n    line-height: 21px;\n    letter-spacing: -0.02em;\n}\n\n.brand {\n    background-image: url("+s+");\n    background-size: 40px auto;\n    background-repeat: no-repeat;\n    padding: 3px 0 0 47px;\n    width: 150px;\n    height: 30px;\n    left: 340px;\n    top: 30px;\n    z-index: 1;\n    position: absolute;\n    color: white;\n    font-weight: normal;\n    font-size: 10px;\n    letter-spacing: 0.6px;\n    font-family: arial;\n    opacity: 0.7;\n}\n\n.brand:hover {\n    cursor: pointer;\n    opacity: 1;\n}\n\n@media only screen and (max-width: 810px) {\n    .brand {\n        display: none;\n    }\n}",""]),e.exports=t},287:function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAoCAYAAABKOyzUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkREQkM5NjhBNDM5NDExRTY4NEQ3OUFDNjI0QzhFODBDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkREQkM5NjhCNDM5NDExRTY4NEQ3OUFDNjI0QzhFODBDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RERCQzk2ODg0Mzk0MTFFNjg0RDc5QUM2MjRDOEU4MEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RERCQzk2ODk0Mzk0MTFFNjg0RDc5QUM2MjRDOEU4MEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz74zgkDAAAKXElEQVR42tya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"},288:function(e){e.exports=JSON.parse('{"provinceDataUrl":"https://covid19umbria.s3.eu-south-1.amazonaws.com/eventi-data.csv","provinceAnagUrl":"data/comuni_umbria.csv","mapboxToken":"pk.eyJ1Ijoic3BhemlkaWdpdGFsaSIsImEiOiJja2d3ajRtZmQwYWxjMnJvZndzaWVsbWsxIn0.r3o5zHneSmDGv3HAu7zEsg","mapboxStyleUrl":"mapbox://styles/spazidigitali/ckgxsk2vp0r0m19t14b5f5rps","mapBounds":[11.892841036097872,42.3654283356793,13.265111638997935,43.61829615507807],"mapCenter":[12.777,43.01],"mapZoom":7}')}});