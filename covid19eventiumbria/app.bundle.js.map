{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./view/MapGL.ts","webpack:///./utils/colorScale.ts","webpack:///./utils/htmlToElement.ts","webpack:///./utils/format.ts","webpack:///./index.ts","webpack:///./App.ts","webpack:///./model/Model.ts","webpack:///./model/Province.ts","webpack:///./model/Entity.ts","webpack:///./view/MapView.ts","webpack:///./view/MapStyles.ts","webpack:///./view/mapView.css?2431","webpack:///./view/mapView.css","webpack:///./view/DataPanel.ts","webpack:///./view/dataPanel.html","webpack:///./view/dataPanel.css?2f38","webpack:///./view/dataPanel.css","webpack:///./assets/back_arrow.svg","webpack:///./assets/ISI-Helvetica-bn.png","webpack:///./assets/NU_Wordmark_Bv.png","webpack:///./view/pane.css?f079","webpack:///./view/pane.css","webpack:///./view/Slider.ts","webpack:///./view/slider.css?8b89","webpack:///./view/slider.css","webpack:///./view/Popup.ts","webpack:///./view/popup.html","webpack:///./view/popup.css?9a7e","webpack:///./view/popup.css","webpack:///./view/Legend.ts","webpack:///./view/legend.css?9bfc","webpack:///./view/legend.css","webpack:///./app.css?2ad1","webpack:///./app.css","webpack:///./assets/isi.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","MapGL","element","config","provinceClicked","SyncEvent","regionClicked","provinceOver","regionOver","provinceOut","VoidSyncEvent","regionOut","_highlightedFeatures","hovered","selected","_onProvinceClick","e","features","feature","this","post","_onProvinceMouseOver","_onProvinceMouseLeave","_element","_config","mapGl","_init","layerId","_map","layer","getLayer","forEach","row","_setFeatureState","id","measure","on","PROVINCE_L","setPaintProperty","REGION_L","pmProvinceColor","PROVINCE_LABELS_L","pmProvinceLabelOpacity","REGION_LABELS_L","PROVINCE_BORDERS_L","pmProvinceBordersOpacity","REGION_BORDERS_L","provinceID","_setPointer","highlightFeature","featureID","layerID","state","setFeatureState","sourceLayer","source","padding","innerWidth","accessToken","mapboxToken","Map","container","style","mapboxStyleUrl","center","mapCenter","zoom","mapZoom","bounds","mapBounds","fitBoundsOptions","top","bottom","left","right","Promise","resolve","reject","err","toggle","getCanvas","cursor","REGION_COLOR","HOVERED_REGION_COLOR","UNDEFINED_COLOR","COLOR_SCALE","_lowColor","_highColor","_max","_min","_interpolator","interpolateHcl","_scale","scaleLog","range","clamp","v","getScale","color","hex","steps","getTicks","getHexAtValue","domain","html","template","document","createElement","trim","innerHTML","content","firstChild","Error","sigFig","number","figures","parseFloat","toPrecision","val","app","App","init","_model","Model","_mapView","MapView","body","_panel","DataPanel","_popup","Popup","_legend","Legend","attach","hide","all","loadData","update","currentDateChanged","infectivityPeriodChanged","eventSizeChanged","factorChanged","currentProvinceIDChanged","hoveredProvinceIDChanged","_provinceData","_currentProvinceID","_hoveredProvinceID","_infectivityPeriod","_eventSize","_factor","_isReady","Array","from","values","_dates","province","_currentDate","datesList","findIndex","getCurrentDate","date","getTime","idx","setCurrentDate","isLastDate","setCurrentDateIndex","getCurrentDateIndex","infectivityPeriod","eventSize","factor","getProvinceById","provinceAnag","_loadProvinceData","_loadProvinceAnag","pop","setPopulation","dates","Set","flatMap","getDates","map","sort","a","b","Date","dataUrl","provinceDataUrl","csv","provinceData","filter","sigla_provincia","provinceId","codice_provincia","Province","set","addReport","provinceAnagUrl","Entity","super","rawData","_checkRawData","stato","codice_regione","denominazione_regione","denominazione_provincia","lat","long","_toDate","getMonth","casesReports","cases","totale_casi","population","_population","today","todaysCases","startDate","setDate","getDate","startCases","undefined","getActiveCasesSinceDays","adjustedCases","getPopulation","getRisk","measures","getRiskTimeline","some","Math","min","max","keys","k","console","warn","timeParse","model","_onProvinceOver","feat","setHoveredProvinceID","_onProvinceOut","_onProvinceClicked","_container","_onCurrentDateChanged","_onFactorChanged","_onDenominatorChanged","_onAggregationChanged","_onHoveredProvinceIDChanged","mapDiv","appendChild","_mapGL","isReady","getEventSize","getInfectivityPeriod","getFactor","provinceList","norm","setLayerData","hoverProvince","rmRegionColor","getSteps","CountryModeMinProvinceLabelZoom","CountryModeMinProvinceBorderZoom","ProvinceModeMinProvinceLabelZoom","api","default","options","exported","locals","___CSS_LOADER_API_IMPORT___","_compact","_onProvinceIdChanged","_onDateChanged","_onEventSizeChanged","_onInfectivityPeriodChanged","_factorMenu","setCurrentValue","_infectivityPeriodMenu","_eventSizeMenu","_lastUpdated","Intl","DateTimeFormat","format","_setCompact","htmlToElement","querySelector","_toggle","addEventListener","querySelectorAll","classList","remove","add","marginLeft","preventDefault","factorMenuContainer","Slider","setData","setLabelFn","valueChange","setFactor","infectivityPeriodMenuContainer","setInfectivityPeriod","eventSizeMenuContainer","setEventSize","autoHide","getCurrentProvince","compact","___CSS_LOADER_GET_URL_IMPORT___","___CSS_LOADER_URL_IMPORT_0___","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","_data","_labelFn","toString","_update","_currentValue","_slider","_getIndexByValue","marks","tickFormat","displayFormat","tickValues","displayValue","_svg","_adjustSlider","wrapper","className","sliderBottom","scaleLinear","width","handle","symbol","type","symbolCircle","size","_onSliderChange","attr","node","selectAll","_setVisible","entity","getHoveredProvince","_title","label","_riskLabel","_riskValue","innerText","formatPercent","_casesLabel","activeCases","_casesValue","_popLabel","_popValue","_chart","visible","_margins","_size","mainTicks","mainLabels","getLabels","_rectsScale","_rectsContainer","join","classed","_labelsContainer","text","_plot","_buildPlot","select","append","_border","theme","_tippy","setContent"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([198,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/* eslint-disable no-dupe-class-members */\nimport { SyncEvent, VoidSyncEvent } from 'ts-events';\nimport mapboxgl, { MapLayerEventType, EventData, Layer } from 'mapbox-gl';\n\nimport { Config } from '../model/Config';\nimport {\n    // pmRegionColor,\n    // pmRegionOpacity,\n    // rmRegionColor,\n    pmProvinceColor,\n    pmProvinceLabelOpacity,\n    // pmRegionLabelOpacity,\n    pmProvinceBordersOpacity,\n    // rmRegionOpacity,\n    // rmProvinceLabelOpacity,\n    // rmRegionLabelOpacity,\n    // rmProvinceBordersOpacity,\n    // pmRegionBorderOpacity,\n    // rmRegionBorderOpacity,\n} from './MapStyles';\nimport { ProvinceFeat, RegionFeat } from './GeoJSONFeature';\n\nexport class MapGL {\n    public static PROVINCE_L = 'province';\n    public static PROVINCE_LABELS_L = 'province labels';\n    public static PROVINCE_BORDERS_L = 'province borders';\n    public static REGION_L = 'regioni';\n    public static REGION_LABELS_L = 'regioni labels';\n    public static REGION_BORDERS_L = 'regioni borders';\n\n    public static REGION_COLOR = '#333333';\n    public static HOVERED_REGION_COLOR = '#222222';\n    public static UNDEFINED_COLOR = '#666666';\n\n    public provinceClicked = new SyncEvent<ProvinceFeat>();\n    public regionClicked = new SyncEvent<RegionFeat>();\n    public provinceOver = new SyncEvent<ProvinceFeat>();\n    public regionOver = new SyncEvent<RegionFeat>();\n    public provinceOut = new VoidSyncEvent();\n    public regionOut = new VoidSyncEvent();\n\n    private _highlightedFeatures: Record<'hovered' | 'selected', Record<string, number | null>> = {\n        hovered: {},\n        selected: {},\n    };\n\n    private _element: HTMLElement;\n    private _config: Config;\n    private _map?: mapboxgl.Map;\n\n    private constructor(element: HTMLElement, config: Config) {\n        this._element = element;\n        this._config = config;\n    }\n\n    public static async create(element: HTMLElement, config: Config): Promise<MapGL> {\n        const mapGl = new MapGL(element, config);\n        await mapGl._init();\n        return mapGl;\n    }\n\n    public setLayerData(layerId: string, data: { id: number; value: number }[]): void {\n        if (!this._map) return;\n        const layer = this._map.getLayer(layerId);\n        data.forEach(row => this._setFeatureState(layer, row.id, { measure: row.value }));\n    }\n\n    public update(): void {\n        if (!this._map) return;\n        this._map.on('mousemove', MapGL.PROVINCE_L, this._onProvinceMouseOver);\n        this._map.on('mouseleave', MapGL.PROVINCE_L, this._onProvinceMouseLeave);\n        this._map.on('click', MapGL.PROVINCE_L, this._onProvinceClick);\n\n        this._map.setPaintProperty(MapGL.REGION_L, 'fill-opacity', 0);\n        this._map.setPaintProperty(MapGL.PROVINCE_L, 'fill-color', pmProvinceColor());\n        this._map.setPaintProperty(MapGL.PROVINCE_LABELS_L, 'text-opacity', pmProvinceLabelOpacity());\n        this._map.setPaintProperty(MapGL.REGION_LABELS_L, 'text-opacity', 0);\n        this._map.setPaintProperty(MapGL.PROVINCE_BORDERS_L, 'line-opacity', pmProvinceBordersOpacity());\n        this._map.setPaintProperty(MapGL.REGION_BORDERS_L, 'line-opacity', 0);\n\n        // this._map.setFilter(MapGL.PROVINCE_LABELS_L, ['==', 'id_prov', this._region.codice_regione]);\n        // this._map.setFilter(MapGL.PROVINCE_BORDERS_L, ['==', 'id_prov', this._region.codice_regione]);\n    }\n\n    public hoverProvince(provinceID: number | null): void {\n        this._setPointer(!!provinceID);\n        this.highlightFeature(provinceID, MapGL.PROVINCE_BORDERS_L, 'hovered');\n    }\n\n    public highlightFeature(featureID: number | null, layerID: string, state: 'hovered' | 'selected'): void {\n        if (!this._map) return;\n        if (this._highlightedFeatures[state][layerID] == featureID) return;\n        const layer = this._map.getLayer(layerID);\n        this._setFeatureState(layer, this._highlightedFeatures[state][layerID], { [state]: false });\n        this._setFeatureState(layer, featureID, { [state]: true });\n        this._highlightedFeatures[state][layerID] = featureID;\n    }\n\n    private _setFeatureState(layer: Layer, id: number | null, state: Record<string, any>): void {\n        if (!this._map || !id) return;\n        this._map.setFeatureState(\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            { sourceLayer: (layer as any).sourceLayer, source: layer.source as string, id: id },\n            state,\n        );\n    }\n\n    private async _init(): Promise<void> {\n        const padding = window.innerWidth < 600 ? [0, 0, 0, 0] : [0, 0, 0, 300];\n        mapboxgl.accessToken = this._config.mapboxToken;\n        this._map = new mapboxgl.Map({\n            container: this._element,\n            style: this._config.mapboxStyleUrl,\n            center: this._config.mapCenter as [number, number],\n            zoom: this._config.mapZoom,\n            bounds: this._config.mapBounds as [number, number, number, number],\n            fitBoundsOptions: {\n                padding: {\n                    top: padding[0] + 50,\n                    bottom: padding[1] + 50,\n                    left: padding[2] + 50,\n                    right: padding[3] + 50,\n                },\n            },\n        });\n\n        return new Promise((resolve, reject) => {\n            if (!this._map) return reject();\n            this._map.on('error', err => reject(err));\n            this._map.on('load', () => {\n                // this._updateStyles();\n                resolve();\n            });\n        });\n    }\n\n    private _onProvinceClick = (e: MapLayerEventType['click'] & EventData): void => {\n        if (!e.features || !e.features.length) return;\n        const feature = e.features[0];\n        if (feature) this.provinceClicked.post(feature as ProvinceFeat);\n    };\n\n    private _onProvinceMouseOver = (e: MapLayerEventType['mousemove'] & EventData): void => {\n        const feature = e.features?.[0] ?? null;\n        if (feature) return this.provinceOver.post(feature as ProvinceFeat);\n        this.provinceOut.post();\n    };\n\n    private _onProvinceMouseLeave = (): void => {\n        this.provinceOut.post();\n    };\n\n    private _setPointer(toggle: boolean): void {\n        if (!this._map) return;\n        this._map.getCanvas().style.cursor = toggle ? 'pointer' : 'default';\n    }\n}\n","import { interpolateHcl } from 'd3-interpolate';\nimport { color } from 'd3-color';\nimport { ScaleLogarithmic, scaleLog, interpolateYlGnBu, interpolatePuBu } from 'd3';\n\nclass ColorScale {\n    // private _lowColor = '#b61aad';\n    // private _lowColor = '#8922a2';\n    private _lowColor = '#343332';\n    // private _highColor = '#ff8d17';\n    private _highColor = '#ffc318';\n    // private _highColor = '#ffbc34';\n    // private _highColor = '#775fff';\n    private _scale: ScaleLogarithmic<number, number>;\n    private _interpolator: (t: number) => string;\n    private _max = 1;\n    private _min = 0.002;\n\n    public constructor() {\n        this._interpolator = interpolateHcl(this._lowColor, this._highColor);\n        // this._interpolator = (t: number): string => interpolateYlGnBu(1 - t);\n        // this._interpolator = (t: number): string => interpolateYlGnBu(1 - t);\n        this._scale = scaleLog()\n            .range([0, 1])\n            .clamp(true);\n    }\n\n    public getLowColor(): string {\n        return this._lowColor;\n    }\n\n    public getHighColor(): string {\n        return this._highColor;\n    }\n\n    public getTicks(): number[] {\n        return [0, 0.005, 0.01, 0.05, 0.1, 0.5, 0.99];\n    }\n\n    public getLabels(): string[] {\n        // return ['<0.5%', '0.5 – 1%', '1 – 5%', '5 – 10%', '10 – 50%', '50 – 99%', '>99%'];\n        return ['0%', '0.5%', '1%', '5%', '10%', '50%', '99%', '100%'];\n    }\n\n    public getHexAtValue(v: number): string {\n        const c = this._interpolator(this.getScale()(v));\n        return color(c)?.hex() ?? '#FF0000';\n    }\n\n    public getSteps(): (string | number)[] {\n        const steps: (string | number)[] = [];\n        this.getTicks().forEach(v => steps.push(v, this.getHexAtValue(v)));\n        return steps;\n    }\n\n    public getScale(): ScaleLogarithmic<number, number> {\n        return this._scale.domain([this._min, this._max]);\n    }\n}\n\nexport const COLOR_SCALE = new ColorScale();\n","export function htmlToElement(html: string): HTMLElement {\n    const template = document.createElement('template');\n    html = html.trim(); // Never return a text node of whitespace as the result\n    template.innerHTML = html;\n    const element = template.content.firstChild;\n    if (!element) throw new Error('No elements fond in html');\n    return element as HTMLElement;\n}\n","export function sigFig(number: number, figures = 2): number {\n    return parseFloat(number.toPrecision(figures));\n}\n\nexport function formatPercent(val: number, figures = 2): string {\n    val *= 100;\n    return sigFig(val, figures) + '%';\n}\n","import { App } from './App';\nimport config from './data/config.json';\n\nconst app = new App(config);\napp.init();\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(window as any).app = app;\n","import { Config } from './model/Config';\nimport { Model } from './model/Model';\nimport { MapView } from './view/MapView';\nimport { DataPanel } from './view/DataPanel';\nimport { Popup } from './view/Popup';\nimport { Legend } from './view/Legend';\n\nimport './app.css';\n// import { DateSelector } from './view/DateSelector';\n\nexport class App {\n    private _model: Model;\n    private _config: Config;\n    private _mapView: MapView;\n    private _panel: DataPanel;\n    private _popup: Popup;\n    private _legend: Legend;\n    // private _dateSelector: DateSelector;\n\n    public constructor(config: Config) {\n        this._config = config;\n        this._model = new Model(this._config);\n        this._mapView = new MapView(document.body, this._model, this._config);\n        this._panel = new DataPanel(document.body, this._model, this._config);\n        this._popup = new Popup(document.body, this._model, this._config);\n        this._legend = new Legend(document.body, this._model, this._config);\n\n        this._mapView.provinceClicked.attach(() => this._panel.hide());\n        // this._dateSelector = new DateSelector(document.body, this._model, this._config);\n    }\n\n    public async init(): Promise<void> {\n        await Promise.all([this._model.loadData(), this._mapView.init()]);\n        this._legend.update();\n        this._mapView.update();\n        this._panel.update();\n        // this._dateSelector.update();\n        this._popup.update();\n    }\n}\n","/* eslint-disable @typescript-eslint/camelcase */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { csv } from 'd3-fetch';\nimport { Config } from './Config';\nimport { SyncEvent } from 'ts-events';\nimport { Province, ProvinceCSVColumns } from './Province';\n\nexport class Model {\n    public currentDateChanged = new SyncEvent<Date>();\n    public infectivityPeriodChanged = new SyncEvent<number>();\n    public eventSizeChanged = new SyncEvent<number>();\n    public factorChanged = new SyncEvent<number>();\n\n    public currentProvinceIDChanged = new SyncEvent<number | null>();\n    public hoveredProvinceIDChanged = new SyncEvent<number | null>();\n\n    private _config: Config;\n\n    private _provinceData = new Map<number, Province>();\n    private _currentProvinceID: number | null = null;\n    private _hoveredProvinceID: number | null = null;\n\n    private _dates?: Date[];\n    private _currentDate?: Date;\n\n    private _infectivityPeriod = 10;\n    private _eventSize = 100;\n    private _factor = 2;\n\n    private _isReady = false;\n\n    public get isReady(): boolean {\n        return this._isReady;\n    }\n\n    public get provinceList(): Province[] {\n        return Array.from(this._provinceData.values());\n    }\n\n    public get datesList(): Date[] {\n        return this._dates?.slice(this._infectivityPeriod) ?? [];\n    }\n\n    public constructor(config: Config) {\n        this._config = config;\n    }\n\n    public getProvinceById(provinceID: number): Province {\n        const province = this._provinceData.get(provinceID);\n        if (!province) throw new Error(`Province not found: ${provinceID}`);\n        return province;\n    }\n\n    // CURRENT DATE\n\n    public getCurrentDateIndex(): number {\n        if (!this._currentDate) throw new Error(`Current date not found: ${this._currentDate}`);\n        return this.datesList.findIndex(d => d === this.getCurrentDate());\n    }\n\n    public getCurrentDate(): Date {\n        if (!this._currentDate) throw new Error(`Current date not found: ${this._currentDate}`);\n        return this._currentDate;\n    }\n\n    public setCurrentDate(date: Date): void {\n        if (this._currentDate?.getTime() === date.getTime()) return;\n        this._currentDate = date;\n        this.currentDateChanged.post(date);\n    }\n\n    public setCurrentDateIndex(idx: number): void {\n        if (idx >= this.datesList.length) throw new Error('Date index out of range');\n        this.setCurrentDate(this.datesList[idx]);\n    }\n\n    public nextDate(): boolean {\n        if (this.isLastDate()) return false;\n        this.setCurrentDateIndex(this.getCurrentDateIndex() + 1);\n        return true;\n    }\n\n    public isLastDate(): boolean {\n        return this.getCurrentDate() === this.datesList[this.datesList.length - 1];\n    }\n\n    // CURRENT DENOMINATOR\n\n    public getInfectivityPeriod(): number {\n        return this._infectivityPeriod;\n    }\n\n    public setInfectivityPeriod(infectivityPeriod: number): void {\n        if (this._infectivityPeriod === infectivityPeriod) return;\n        this._infectivityPeriod = infectivityPeriod;\n        this.infectivityPeriodChanged.post(infectivityPeriod);\n    }\n\n    // CURRENT EVENTSIZE\n\n    public getEventSize(): number {\n        return this._eventSize;\n    }\n\n    public setEventSize(eventSize: number): void {\n        if (this._eventSize === eventSize) return;\n        this._eventSize = eventSize;\n        this.eventSizeChanged.post(eventSize);\n    }\n\n    // CURRENT FACTOR\n\n    public getFactor(): number {\n        return this._factor;\n    }\n\n    public setFactor(factor: number): void {\n        if (this._factor === factor) return;\n        this._factor = factor;\n        this.factorChanged.post(factor);\n    }\n\n    // HOVERED\n    public setCurrentProvinceID(provinceID: number | null): void {\n        this._currentProvinceID = provinceID;\n        this.currentProvinceIDChanged.post(provinceID);\n    }\n\n    public getCurrentProvince(): Province | undefined {\n        if (!this._currentProvinceID) return;\n        return this.getProvinceById(this._currentProvinceID);\n    }\n\n    public setHoveredProvinceID(provinceID: number | null): void {\n        if (this._hoveredProvinceID === provinceID) return;\n        this._hoveredProvinceID = provinceID;\n        this.hoveredProvinceIDChanged.post(provinceID);\n    }\n\n    public getHoveredProvinceID(): number | null {\n        return this._hoveredProvinceID;\n    }\n\n    public getHoveredProvince(): Province | undefined {\n        if (!this._hoveredProvinceID) return;\n        return this.getProvinceById(this._hoveredProvinceID);\n    }\n\n    public getBBox(): [number, number, number, number] {\n        // if (!this._regionData) return [0, 0, 0, 0];\n        // const bboxes = this._regionData.map(p => p.bounds);\n        // return compositeBBox(bboxes);\n        return [0, 0, 0, 0];\n    }\n\n    public async loadData(): Promise<void> {\n        let provinceAnag: [number, number][];\n        [this._provinceData, provinceAnag] = await Promise.all([this._loadProvinceData(), this._loadProvinceAnag()]);\n        provinceAnag.forEach(([id, pop]) => this.getProvinceById(id).setPopulation(pop));\n\n        const dates = new Set([...this._provinceData.values()].flatMap(e => [...e.getDates().map(d => d.getTime())]));\n\n        this._dates = Array.from(dates)\n            .sort((a, b) => a - b)\n            .map(d => new Date(d));\n        this._currentDate = this._dates[this._dates.length - 1];\n\n        this._isReady = true;\n    }\n\n    private async _loadProvinceData(): Promise<Map<number, Province>> {\n        const dataUrl = this._config.provinceDataUrl;\n        const data = await csv<ProvinceCSVColumns>(dataUrl);\n        const provinceData = new Map<number, Province>();\n        data.filter(d => !!d.sigla_provincia).forEach(d => {\n            const provinceId = +(d.codice_provincia ?? '');\n            if (!provinceId) throw new Error('No province id');\n            let province = provinceData.get(provinceId);\n            if (!province) {\n                province = new Province(d);\n                provinceData.set(provinceId, province);\n            }\n            province!.addReport(d);\n        });\n        return provinceData;\n    }\n\n    private async _loadProvinceAnag(): Promise<[number, number][]> {\n        const dataUrl = this._config.provinceAnagUrl;\n        const data = await csv<'codice_provincia' | 'popolazione'>(dataUrl);\n        return data.map(d => [+d['codice_provincia']!, +d['popolazione']!] as [number, number]);\n    }\n\n    // private _getExtent(list: Province[], date?: Date, eventSize, infectivityPeriod, factor): [number, number] {\n    //     const mapFn = date\n    //         ? (r: Province): (number | undefined)[] => [r.getRisk(date, eventSize, infectivityPeriod, factor)]\n    //         : (r: Province): (number | undefined)[] =>\n    //               r.getRiskTimeline(eventSize, infectivityPeriod, factor).map(([_, m]) => m);\n\n    //     const measures = list.flatMap(mapFn).filter(m => !!m) as number[];\n    //     return [Math.min(...measures), Math.max(...measures)];\n    // }\n}\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n/* eslint-disable @typescript-eslint/camelcase */\nimport { DSVRowString } from 'd3-dsv';\nimport { Entity } from './Entity';\n\nexport interface ProvinceReport {\n    data: Date;\n    totale_casi: number;\n}\n\nexport type ProvinceCSVColumns =\n    | 'data'\n    | 'stato'\n    | 'codice_regione'\n    | 'denominazione_regione'\n    | 'codice_provincia'\n    | 'denominazione_provincia'\n    | 'sigla_provincia'\n    | 'lat'\n    | 'long'\n    | 'totale_casi'\n    | 'note';\n\nexport class Province extends Entity<ProvinceCSVColumns> {\n    public stato!: 'ITA';\n    public codice_regione!: number;\n    public denominazione_regione!: string;\n    public codice_provincia!: number;\n    public denominazione_provincia!: string;\n    public sigla_provincia!: string;\n    public lat!: number;\n    public long!: number;\n\n    public get label(): string {\n        return this.denominazione_provincia;\n    }\n\n    public get id(): number {\n        return this.codice_provincia;\n    }\n\n    public constructor(d: DSVRowString<ProvinceCSVColumns>) {\n        super();\n        const rawData = this._checkRawData(d);\n        if (rawData.stato !== 'ITA') throw new Error('Unexpected country');\n        this.stato = rawData.stato;\n        this.codice_regione = +rawData.codice_regione!;\n        this.denominazione_regione = rawData.denominazione_regione!;\n        this.codice_provincia = +rawData.codice_provincia!;\n        this.denominazione_provincia = rawData.denominazione_provincia!;\n        this.sigla_provincia = rawData.sigla_provincia!;\n        this.lat = +rawData.lat!;\n        this.long = +rawData.long!;\n    }\n\n    public addReport(d: DSVRowString<ProvinceCSVColumns>): void {\n        const rawData = this._checkRawData(d);\n        const date = this._toDate(rawData.data);\n        if (date.getMonth() < 7) return;\n        this.casesReports.set(date.getTime(), {\n            data: date,\n            cases: +rawData.totale_casi,\n        });\n    }\n}\n\nexport function isProvince(t: unknown): t is Province {\n    return t instanceof Province;\n}\n","import { DSVRowString } from 'd3-dsv';\nimport { timeParse } from 'd3';\n\nexport abstract class Entity<T extends string = string> {\n    public casesReports = new Map<number, { data: Date; cases: number }>();\n    protected _population?: number;\n\n    public abstract get label(): string;\n    public abstract get id(): string | number;\n\n    public getTotalCases(date: Date): number | undefined {\n        return this.casesReports.get(date.getTime())?.cases;\n    }\n\n    public setPopulation(population: number): void {\n        this._population = population;\n    }\n\n    public getPopulation(): number {\n        if (!this._population) throw new Error('Population not loaded yet.');\n        return this._population;\n    }\n\n    public getActiveCasesSinceDays(today: Date, infectivityPeriod: number): number | undefined {\n        const todaysCases = this.casesReports.get(today.getTime())?.cases;\n        const startDate = new Date(today.getTime());\n        startDate.setDate(startDate.getDate() - infectivityPeriod);\n        const startCases = this.casesReports.get(startDate.getTime())?.cases;\n        if (todaysCases === undefined || startCases === undefined) throw new Error('Could not find cases');\n        const cases = todaysCases - startCases;\n        return cases < 0 ? undefined : cases;\n    }\n\n    public getDates(): Date[] {\n        return Array.from(this.casesReports.values()).map(r => r.data);\n    }\n\n    public getRisk(date: Date, eventSize = 100, infectivityPeriod = 10, factor = 1): number | undefined {\n        const cases = this.getActiveCasesSinceDays(date, infectivityPeriod);\n        if (cases == undefined) return undefined;\n        const adjustedCases = cases * factor;\n        const pop = this.getPopulation();\n        const risk = 1 - (1 - adjustedCases / pop) ** eventSize;\n        return risk;\n    }\n\n    public getRiskTimeline(eventSize: number, infectivityPeriod: number, factor: number): [Date, number][] {\n        return [...this.casesReports.values()]\n            .slice(infectivityPeriod)\n            .map(v => {\n                const value = this.getRisk(v.data, eventSize, infectivityPeriod, factor);\n                return [v.data, value] as [Date, number];\n            })\n            .sort((a, b) => b[0].getTime() - a[0].getTime());\n    }\n\n    public getRiskExtent(eventSize: number, infectivityPeriod: number, factor: number): [number, number] {\n        const measures = this.getRiskTimeline(eventSize, infectivityPeriod, factor).map(v => v[1]);\n        if (measures.some(m => m === undefined)) throw new Error('Undefined values in measure');\n        return [Math.min(...measures), Math.max(...measures)];\n    }\n\n    protected _checkRawData(d: DSVRowString<T>): Record<T, string> {\n        Object.keys(d).forEach((k: string) => {\n            if (k === 'note') return;\n            if (!d[k as T]) console.warn(`Missing value for ${k}`);\n        });\n        return d as Record<T, string>;\n    }\n\n    protected _toDate(s: string): Date {\n        const date = timeParse('%Y-%m-%d')(s.slice(0, 10));\n        if (!date) throw new Error('Date could not be parsed');\n        return date;\n    }\n\n    public abstract addReport(d: DSVRowString<T>): void;\n}\n","import { MapGL } from './MapGL';\nimport { Model } from '../model/Model';\nimport { Config } from '../model/Config';\nimport { ProvinceFeat } from './GeoJSONFeature';\n\nimport './mapView.css';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { VoidSyncEvent } from 'ts-events';\n\nexport class MapView {\n    public provinceClicked = new VoidSyncEvent();\n\n    private _model: Model;\n    private _config: Config;\n    private _container: HTMLElement;\n\n    private _mapGL?: MapGL;\n\n    public constructor(container: HTMLElement, model: Model, config: Config) {\n        this._container = container;\n        this._model = model;\n        this._config = config;\n\n        this._model.currentDateChanged.attach(() => this._onCurrentDateChanged());\n        this._model.factorChanged.attach(() => this._onFactorChanged());\n        this._model.infectivityPeriodChanged.attach(() => this._onDenominatorChanged());\n        this._model.eventSizeChanged.attach(() => this._onAggregationChanged());\n        this._model.hoveredProvinceIDChanged.attach(id => this._onHoveredProvinceIDChanged(id));\n    }\n\n    public async init(): Promise<void> {\n        const mapDiv = document.createElement('div');\n        mapDiv.id = 'map';\n        this._container.appendChild(mapDiv);\n        this._mapGL = await MapGL.create(mapDiv, this._config);\n        this._mapGL.provinceClicked.attach(this._onProvinceClicked);\n        this._mapGL.provinceOver.attach(this._onProvinceOver);\n        this._mapGL.provinceOut.attach(this._onProvinceOut);\n    }\n\n    public update(): void {\n        if (!this._mapGL || !this._model.isReady) return;\n\n        const date = this._model.getCurrentDate();\n        const eventSize = this._model.getEventSize();\n        const infectivityPeriod = this._model.getInfectivityPeriod();\n        const factor = this._model.getFactor();\n\n        // let values: { id: number; value: number }[];\n        // let ext: [number, number];\n        const values = this._model.provinceList.map(p => {\n            const norm = p.getRisk(date, eventSize, infectivityPeriod, factor) || 0;\n            return {\n                id: p.codice_provincia,\n                value: norm,\n            };\n        });\n\n        this._mapGL.setLayerData(MapGL.PROVINCE_L, values);\n        this._mapGL.update();\n    }\n\n    private _onProvinceOver = (feat: ProvinceFeat): void => {\n        this._model.setHoveredProvinceID(feat.id as number);\n    };\n\n    private _onProvinceOut = (): void => {\n        this._model.setHoveredProvinceID(null);\n    };\n\n    private _onProvinceClicked = (): void => {\n        this.provinceClicked.post();\n    };\n\n    private _onCurrentDateChanged(): void {\n        this.update();\n    }\n\n    private _onFactorChanged(): void {\n        this.update();\n    }\n\n    private _onDenominatorChanged(): void {\n        this.update();\n    }\n\n    private _onAggregationChanged(): void {\n        this.update();\n    }\n\n    private _onHoveredProvinceIDChanged(provinceID: number | null): void {\n        this._mapGL?.hoverProvince(provinceID);\n    }\n}\n","/* eslint-disable prettier/prettier */\n// Use Mapbox style formatting\n\nimport { MapGL } from './MapGL';\nimport { COLOR_SCALE } from '../utils/colorScale';\n\n// REGION MODE\n\nconst CountryModeMinProvinceLabelZoom = 8.75;\nconst CountryModeMinProvinceBorderZoom = CountryModeMinProvinceLabelZoom;\n\nexport function rmRegionColor(): {} {\n    const steps = COLOR_SCALE.getSteps();\n    return [\n        'case',\n        // if the selected feature-state field is a number (ie. not undefined)\n        [\n            '==', \n            ['typeof', ['feature-state', 'measure']],\n            'number'\n        ],\n        // interpolate linearly between LOW_COLOR=0 and HIGH_COLOR=0.3\n        // [\n        //     'interpolate-hcl',\n        //     ['linear'],\n        //     ['number', ['feature-state', feature.feature], 0],\n        //     feature.min, MapGL.LOW_COLOR,\n        //     feature.max, MapGL.HIGH_COLOR,\n        // ],\n        [\"step\",\n            ['number', ['feature-state', 'measure'], 0],\n            ...(steps.slice(1))\n        ],\n        // else fill with transparent color\n        MapGL.UNDEFINED_COLOR,\n    ];\n}\n\nexport function rmRegionOpacity(): {} {\n    return 1;\n}\n\nexport function rmRegionBorderOpacity(): {} {\n    return [\n        \"case\",\n        [\n            \"boolean\",\n            [\"feature-state\", \"hovered\"],\n            false\n        ],\n        1,\n        0.1\n    ];\n}\n\nexport function rmProvinceLabelOpacity(): {} {\n    return [\n        \"interpolate\",\n        [\"linear\"],\n        [\"zoom\"],\n        CountryModeMinProvinceLabelZoom - 0.25,\n        0,\n        CountryModeMinProvinceLabelZoom + 0.25,\n        0.9\n    ];\n}\n\nexport function rmRegionLabelOpacity(): {} {\n    return [\n        \"interpolate\",\n        [\"linear\"],\n        [\"zoom\"],\n        CountryModeMinProvinceLabelZoom - 0.25,\n        0.9,\n        CountryModeMinProvinceLabelZoom + 0.25,\n        0\n    ];\n}\n\nexport function rmProvinceBordersOpacity(): {} {\n    return [\n        \"interpolate\",\n        [\"linear\"],\n        [\"zoom\"],\n        CountryModeMinProvinceBorderZoom - 0.25,\n        0,\n        CountryModeMinProvinceBorderZoom + 0.25,\n        0.2\n    ];\n}\n\n// PROVINCE MODE\n\nconst ProvinceModeMinProvinceLabelZoom = 4.25;\nconst ProvinceModeMinProvinceBorderZoom = 4.25;\n\nexport function pmRegionColor(): {} {\n    return [\n        \"case\",\n        [\n            \"boolean\",\n            [ \"feature-state\", \"hovered\" ],\n            false\n        ],\n        MapGL.HOVERED_REGION_COLOR,\n        MapGL.REGION_COLOR\n    ];\n}\n\nexport function pmRegionOpacity(): {} {\n    return 0;\n}\n\nexport function pmRegionBorderOpacity(): {} {\n    return [\n        \"interpolate\",\n        [\"linear\"],\n        [\"zoom\"],\n        3.5,\n        0,\n        6,\n        0.1\n    ]\n}\n\nexport function pmProvinceLabelOpacity(): {} {\n    return [\n        \"interpolate\",\n        [\"linear\"],\n        [\"zoom\"],\n        ProvinceModeMinProvinceLabelZoom - 0.25,\n        0,\n        ProvinceModeMinProvinceLabelZoom + 0.25,\n        0.9\n    ];\n}\n\nexport function pmRegionLabelOpacity(): {} {\n    return 0;\n}\n\nexport function pmProvinceBordersOpacity(): {} {\n    return [\n        \"case\",\n        [\n            \"boolean\",\n            [\"feature-state\", \"hovered\"],\n            false\n        ],\n        1,\n        0.1\n        // [\n        //     \"interpolate\",\n        //     [\"linear\"],\n        //     [\"zoom\"],\n        //     ProvinceModeMinProvinceBorderZoom - 0.5,\n        //     0.05,\n        //     ProvinceModeMinProvinceBorderZoom + 0.5,\n        //     0.1\n        // ]\n    ];\n}\n\n// export function pmProvinceBordersOpacity(): {} {\n//     return [\n//         \"interpolate\",\n//         [\"linear\"],\n//         [\"zoom\"],\n//         ProvinceModeMinProvinceBorderZoom - 0.5,\n//         0.05,\n//         ProvinceModeMinProvinceBorderZoom + 0.5,\n//         0.1\n//     ];\n// }\n\nexport const pmProvinceColor = rmRegionColor;\n","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./mapView.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#map {\\n    width: 100%;\\n    height: 100%;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { Model } from '../model/Model';\nimport { Config } from '../model/Config';\n// import { Menu } from './Menu';\nimport { htmlToElement } from '../utils/htmlToElement';\n\nimport tmpl from './dataPanel.html';\nimport './dataPanel.css';\nimport './pane.css';\nimport 'simplebar/dist/simplebar.css';\n// import { Pane } from './Pane';\nimport { Slider } from './Slider';\n// import { formatPercent } from '../utils/format';\nimport SimpleBar from 'simplebar';\n\nexport class DataPanel {\n    private _model: Model;\n    private _config: Config;\n\n    private _container: HTMLElement;\n    private _toggle!: HTMLAnchorElement;\n    private _panel!: HTMLDivElement;\n    private _lastUpdated!: HTMLDivElement;\n\n    private _compact = false;\n\n    // private _detailPane!: Pane;\n    // private _homePane!: Pane;\n\n    private _factorMenu!: Slider;\n    private _eventSizeMenu!: Slider;\n    private _infectivityPeriodMenu!: Slider;\n\n    public constructor(container: HTMLElement, model: Model, config: Config) {\n        this._container = container;\n        this._model = model;\n        this._config = config;\n\n        this._model.currentProvinceIDChanged.attach(() => this._onProvinceIdChanged());\n        this._model.currentDateChanged.attach(() => this._onDateChanged());\n        this._model.factorChanged.attach(() => this._onFactorChanged());\n        this._model.eventSizeChanged.attach(() => this._onEventSizeChanged());\n        this._model.infectivityPeriodChanged.attach(() => this._onInfectivityPeriodChanged());\n        this._init();\n    }\n\n    public update(): void {\n        const date = this._model.getCurrentDate();\n\n        this._factorMenu.setCurrentValue(this._model.getFactor());\n        this._infectivityPeriodMenu.setCurrentValue(this._model.getInfectivityPeriod());\n        this._eventSizeMenu.setCurrentValue(this._model.getEventSize());\n        this._lastUpdated.innerHTML = `Ultimo aggiornamento: ${Intl.DateTimeFormat().format(date)}`;\n        // this._homePane.setEntity(country);\n        // this._homePane.setMeasure(measure);\n        // this._homePane.setDate(date);\n        // this._homePane.update();\n\n        // const detailEntity = this._model.getCurrentProvince();\n        // if (!detailEntity) return;\n        // this._detailPane.setEntity(detailEntity);\n        // this._detailPane.setDate(date);\n        // this._detailPane.setFactor(this._model.getFactor());\n        // this._detailPane.setInfectivityPeriod(this._model.getInfectivityPeriod());\n        // this._detailPane.setEventSize(this._model.getEventSize());\n        // this._detailPane.update();\n    }\n\n    public hide(): void {\n        this._setCompact(true);\n    }\n\n    private _init(): void {\n        this._panel = htmlToElement(tmpl) as HTMLDivElement;\n        this._container.appendChild(this._panel);\n        this._lastUpdated = this._panel.querySelector('.lastUpdated') as HTMLDivElement;\n        this._toggle = this._panel.querySelector('.hide') as HTMLAnchorElement;\n        this._toggle.addEventListener('click', () => this._setCompact(!this._compact));\n\n        [...this._panel.querySelectorAll('nav a')].forEach((a, i, l) => {\n            a.addEventListener('click', e => {\n                l.forEach(a => a.classList.remove('active'));\n                a.classList.add('active');\n                (this._panel.querySelector('.panes-wrapper') as HTMLDivElement).style.marginLeft = `-${i * 100}%`;\n                e.preventDefault();\n            });\n        });\n\n        const factorMenuContainer = this._panel.querySelector('.factorMenuContainer') as HTMLDivElement;\n        this._factorMenu = new Slider(factorMenuContainer);\n        this._factorMenu.setData([6, 2]);\n        this._factorMenu.setLabelFn((d: number) => `1 su ${d}`);\n        this._factorMenu.valueChange.attach(m => this._model.setFactor(m));\n\n        const infectivityPeriodMenuContainer = this._panel.querySelector(\n            '.infectivityPeriodMenuContainer',\n        ) as HTMLDivElement;\n        this._infectivityPeriodMenu = new Slider(infectivityPeriodMenuContainer);\n        this._infectivityPeriodMenu.setData([7, 10]);\n        this._infectivityPeriodMenu.setLabelFn((d: number) => d + 'gg');\n        this._infectivityPeriodMenu.valueChange.attach(m => this._model.setInfectivityPeriod(m));\n\n        const eventSizeMenuContainer = this._panel.querySelector('.eventSizeMenuContainer') as HTMLDivElement;\n        this._eventSizeMenu = new Slider(eventSizeMenuContainer);\n        this._eventSizeMenu.setData([10, 25, 50, 100, 500, 1000, 5000, 10000, 20000]);\n        this._eventSizeMenu.valueChange.attach(m => this._model.setEventSize(m));\n\n        new SimpleBar(this._panel.querySelector('.controls') as HTMLElement, { autoHide: true });\n        new SimpleBar(this._panel.querySelector('.about') as HTMLElement, { autoHide: true });\n        new SimpleBar(this._panel.querySelector('.metodo') as HTMLElement, { autoHide: true });\n        new SimpleBar(this._panel.querySelector('.credits') as HTMLElement, { autoHide: true });\n        // const detailPane = this._panel.querySelector('.pane.detail') as HTMLDivElement;\n        // const close = detailPane.querySelector('.close') as HTMLAnchorElement;\n        // close.addEventListener('click', () => this._onCloseClicked());\n        // this._detailPane = new Pane(detailPane, this._model, this._config);\n    }\n\n    private _onProvinceIdChanged(): void {\n        const province = this._model.getCurrentProvince();\n        this._panel.classList.toggle('detail', !!province);\n        this.update();\n    }\n\n    private _onDateChanged(): void {\n        this.update();\n    }\n\n    private _onInfectivityPeriodChanged(): void {\n        this.update();\n    }\n\n    private _onEventSizeChanged(): void {\n        this.update();\n    }\n\n    private _onFactorChanged(): void {\n        this.update();\n    }\n\n    private _setCompact(compact: boolean): void {\n        this._compact = compact;\n        this._panel.classList.toggle('compact', this._compact);\n    }\n}\n","module.exports = \"<div id=\\\"panel\\\">\\n    <div class=\\\"panes-header\\\">\\n        <a href=\\\"#\\\" class=\\\"hide\\\">&times;</a>\\n        <h1>Eventi e Covid-19</h1>\\n        <p>\\n            Per una consapevolezza dell'impatto di eventi con gruppi numerosi.\\n        </p>\\n        <nav>\\n            <a href=\\\"#\\\" class=\\\"active\\\">Home</a>\\n            <a href=\\\"#\\\">Informazioni</a>\\n            <a href=\\\"#\\\">Metodo</a>\\n            <a href=\\\"#\\\">Credits</a>\\n        </nav>\\n    </div>\\n    <span class=\\\"panes-wrapper\\\">\\n\\n        <div class=\\\"pane controls\\\">\\n            <p style=\\\"margin-top: 15px;\\\">\\n                La mappa mostra una stima del rischio di essere esposti al virus SARS-CoV-2 sulla base del numero di persone che partecipano ad un evento. Il rischio è espresso come la probabilità che almeno un individuo positivo sia presente all'evento.\\n            </p>\\n            <div class=\\\"eventSizeMenuContainer menuContainer\\\">\\n                <div class='menuLabel'>Dimensioni evento (numero di persone)</div>\\n            </div>\\n            <div class=\\\"infectivityPeriodMenuContainer menuContainer\\\">\\n                <div class='menuLabel'>Periodo di infettività</div>\\n            </div>\\n            <div class=\\\"factorMenuContainer menuContainer\\\">\\n                <div class='menuLabel'>Percentuale infezioni rilevate</div>\\n            </div>\\n            <div class=\\\"lastUpdated\\\"></div>\\n        </div>\\n\\n        <div class=\\\"pane about\\\">\\n            <h3>La mappa</h3>\\n            <p>La mappa mostra una stima del rischio di essere potenzialmente esposti al SARS-CoV-2 dato il numero di persone che partecipano ad un evento. Il rischio è espresso come la probabilità stimata (0-100%) che almeno 1 individuo positivo al SARS-CoV-2 sia presente durante l'evento.</p>\\n\\n            <p>Il rischio di incontrare una persona affetta da COVID-19 (la malattia causata dal virus SARS-CoV-2) nello specifico comune dipende da tre fattori:</p>\\n            <ol>\\n                <li><span>La stima della prevalenza di casi nello specifico comune. Questo valore è dato dal numero di casi rilevato dal sistema di sorveglianza in un un intervallo che va dai 7 ai 10 giorni precedenti.</span></li>\\n                <li><span>Il fattore di sottostima delle infezioni da parte del sistema di sorveglianza, che può essere variato tra 2 e 6, e introduce un fattore correttivo per stimare la reale prevalenza di infetti.</span></li>\\n                <li><span>Il numero di partecipanti all'evento.</span></li>\\n            </ol>\\n\\n            <h3>Nota bene</h3>\\n            <p>È importante sottolineare che il presente strumento non esprime la probabilità di contrarre l'infezione da virus SARS-CoV-2, ma solo di essere ad un evento dove almeno un altro individuo è virus SARS-CoV-2 positivo. Il rischio riportato qui è una stima, ovviamente basata su dati imperfetti e dipende dalle assunzioni sulla prevalenza dei casi reali (per i dettagli vedere Metodo).</p>\\n        </div>\\n        <div class=\\\"pane metodo\\\">\\n            \\n            <h3>Stima del rischio</h3>\\n            <p>Qual è la probabilità che una persona che partecipa ad un evento o incontro sia positiva al SARS-CoV-2?</p>\\n            <p>Per rispondere a questa domanda è più facile stimare la probabilità del contrario: se andiamo allo stadio a vedere una partita di calcio, qual è la possibilità che nessuno dei 50,000 spettatori sia infetto?</p>\\n            \\n            <p>Consideriamo ogni singolo spettatore. Se 1,000 dei circa 60 milioni di persone in Italia sono infette con il SARS-CoV2, la probabilità di non essere infetti può essere stimata come 59,999,000/60,000,000, ovvero una probabilità del 99.9983%. Una ottima prospettiva dal punto di vista di un solo individuo. In termini di scommesse parliamo di un evento favorevole 60,000 a 1. </p>\\n            <p>Ora, qual è la probabilità che tutte le 50,000 persone non siano positive? Da un punto di vista di calcolo delle probabilità, ciò è analogo a vincere 50,000 scommesse contemporaneamente; nonostante ciascuna scommessa abbia una probabilità di vincita molto elevata, non è comunque semplice vincerle tutte. Questa probabilità si può calcolare moltiplicando quella di una singola vincita (0.999983...) per se stessa 50,000 volte. Quindi la probabilità di vincere tutte le scommesse diventa solo del 43%. In altre parole, la probabilità che almeno uno dei partecipanti risulti positivo al virus SARS-CoV-2 è pari al 57%.</p>\\n            \\n            <p>Per tutti gli esperti di probabilità, è bene specificare che questa stima contiene un alto numero di assunzioni. La prima che tutte le persone abbiano la stessa probabilità di infezione. La seconda è che la probabilità di avere SARS-CoV-2 per ogni individuo è indipendente dallo stato degli altri individui; questo non è vero per congiunti e appartenenti a nuclei familiari. Infine, noi usiamo una stima della prevalenza su base comunale. Tuttavia, analisi più precise devono tenere in conto che la prevalenza ha una eterogeneità geografica che varia di comune in comune. </p>\\n            \\n            <p>Inoltre, considerando queste assunzioni, la probabilità che un certo numero di persone positive al virus partecipi ad un dato evento è descritta da una distribuzione ipergeometrica; l'uso di una distribuzione binomiale (come nell'esempio sopra riportato) fornisce tuttavia un'approssimazione particolarmente buona, dal momento che il numero di partecipanti all'evento risulta molto più piccolo della popolazione totale.</p>\\n            \\n            <h3>Prevalenza</h3>\\n            <p>Per avere una stima della prevalenza usiamo il numero totale di casi osservato tra 7 e 10 giorni prima della data dell'evento. Questa stima è basata sul periodo infettivo dei contagiati da SARS-CoV-2 e il possibile ritardo nella loro identificazione. Bisogna notare che i casi rilevati vengono isolati ma molti non vengono identificati prontamente e/o verranno identificati nei giorni successivi. Inoltre bisogna sempre considerare l'alto numero di infezioni che non vengono intercettate dal sistema sanitario. In Italia, seguendo l'indagine sierologica ISTAT, nel primo periodo pandemico meno di 1 caso su 6 è stato identificato. La proporzione di casi non identificati durante i mesi estivi è sicuramente scesa, anche se al momento non esiste una stima precisa. Per questo lasciamo all'utente la possibilità di considerare diversi scenari per la proporzione di sottostima dei casi reali.</p>\\n            <p>Anche in questo caso bisogna specificare che la metodologia usa una stima della prevalenza attuale che è approssimata e dovrebbe essere raffinata attraverso modellizzazioni più precise. </p>\\n            \\n            <h3>Interpretazione della probabilità di rischio</h3>\\n            <p>La probabilità di rischio calcolata in questa piattaforma deve essere interpretata come una stima approssimata del rischio reale. </p>\\n            <p>La probabilità risultante deve essere quindi letta senza dare troppo peso a differenze dell'ordine di pochi punti percentuali. </p>\\n            <p>E' importante sottolineare ancora una volta che la probabilità che riportiamo non esprime il rischio di contrarre la malattia, che dipende poi da fattori che considerano la lunghezza dell'evento, lo spazio in cui si svolge e le misure di precauzione come mascherine e distanziamento. </p>\\n        </div>\\n        <div class=\\\"pane credits\\\">\\n\\n            <a class=\\\"isilogo\\\" href=\\\"https://isi.it\\\" target=\\\"_blank\\\"></a>\\n            \\n            <h3>Progetto e sviluppo</h3>\\n            <ul>\\n                <li>\\n                    <span class=\\\"author\\\">Corrado Gioannini</span>\\n                    <span class=\\\"affiliation\\\">Fondazione ISI</span>\\n                </li>\\n                <li>\\n                    <span class=\\\"author\\\">Daniela Paolotti</span>\\n                    <span class=\\\"affiliation\\\">Fondazione ISI</span>\\n                </li>\\n                <li>\\n                    <span class=\\\"author\\\">Marco Quaggiotto</span>\\n                    <span class=\\\"affiliation\\\">Politecnico di Milano / Fondazione ISI</span>\\n                </li>\\n                <li>\\n                    <span class=\\\"author\\\">Luca Rossi</span>\\n                    <span class=\\\"affiliation\\\">Fondazione ISI</span>\\n                </li>\\n                <li>\\n                    <span class=\\\"author\\\">Michele Tizzoni</span>\\n                    <span class=\\\"affiliation\\\">Fondazione ISI</span>\\n                </li>\\n                <li>\\n                    <span class=\\\"author\\\">Matteo Chinazzi</span>\\n                    <span class=\\\"affiliation\\\">Mobs Lab, Northeastern University</span>\\n                </li>\\n                <li>\\n                    <span class=\\\"author\\\">Alessandro Vespignani</span>\\n                    <span class=\\\"affiliation\\\">Mobs Lab, Northeastern University</span>\\n                </li>\\n                <li>\\n                    <span class=\\\"author\\\">Joshua Weitz</span>\\n                    <span class=\\\"affiliation\\\">Georgia Tech</span>\\n                </li>\\n            </ul>\\n\\n            <h3>Informazioni</h3>\\n            <p>Per ulteriori informazioni contattare <a href=\\\"mailto:michele.tizzoni@isi.it\\\" target=\\\"_blank\\\">michele.tizzoni@isi.it</a> o <a href=\\\"mailto:daniela.paolotti@isi.it\\\" target=\\\"_blank\\\">daniela.paolotti@isi.it</a>\\n            </p>\\n\\n            <h3>Cartografia e visualizzazione</h3>\\n            <p>Interfaccia sviluppata da <a href=\\\"http://datainterfaces.org\\\" target=\\\"_blank\\\">DataInterfaces.org</a>, laboratorio sperimentale di collaborazione tra Politecnico di Milano e Fondazione ISI.\\n            </p>\\n\\n            <h3>Fonti dati</h3>\\n            <p><b><a href=\\\"https://github.com/pcm-dpc/COVID-19\\\" target=\\\"_blank\\\">Dati COVID-19 Italia</a></b> forniti dal Ministero della Salute. Elaborazione a cura del Dipartimento della Protezione Civile. CC-BY-4.0.<br>\\n            <b><a href=\\\"http://dati.istat.it/Index.aspx?DataSetCode=DCIS_POPRES1\\\" target=\\\"_blank\\\">Dati demografici</a></b> a cura dell'Istituto nazionale di statistica. CC-BY-3.0.<br>\\n            <b><a href=\\\"https://www.openstreetmap.org/about/\\\" target=\\\"_blank\\\">Dati cartografici</a></b> © OpenStreetMap contributors. Licenza ODbL.\\n            </p>\\n\\n            <h3>Acknowledgements</h3>\\n            <p>Eventi e Covid-19 è un progetto ispirato al <a href=\\\"https://covid19risk.biosci.gatech.edu/\\\" target=\\\"_blank\\\">Covid-19 Event Risk Assessment Planning Tool</a> sviluppato da Dr. Joshua Weitz (Professor of Biological Sciences a Georgia Tech) e Dr. Clio Andris (Assistant Professor of City & Regional Planning and Interactive Computing at Georgia Tech) insieme ad altri ricercatori della Stanford University.</p>\\n            <p>I ricercatori del Georgia Institute of Technology, Northeastern University e Fondazione ISI hanno creato una collaborazione internazionale per allargare a diversi paesi i modelli di stima del rischio COVID-19 nei grandi eventi. La creazione di nuove mappe per altri paesi del mondo verrà annunciata su <a href=\\\"https://covid19risk.biosci.gatech.edu/\\\" target=\\\"_blank\\\">covid19risk.biosci.gatech.edu</a>, da cui sarà possibile accedere alle singole piattaforme nazionali.</p>\\n            <p>Per citare questo lavoro: Chande, A.T., Gussler, W., Harris, M., Lee, S., Rishishwar, L., Hilley, T., Jordan, I.K., Andris, C.M., and Weitz, J.S. 'Interactive COVID-19 Event Risk Assessment Planning Tool', URL <a href=\\\"https://covid19risk.biosci.gatech.edu/\\\" target=\\\"_blank\\\">covid19risk.biosci.gatech.edu</a></p>\\n            <p>Questa iniziativa è parzialmente finanziata dal progetto <a href=\\\"https://cordis.europa.eu/project/id/101003688\\\" target=\\\"_blank\\\">Epipose</a> (European Commission H2020-SC1-PHE-CORONAVIRUS-2020 call).</p>\\n        </div>\\n    </div>\\n</div>\\n\";","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./dataPanel.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"../assets/back_arrow.svg\");\nvar ___CSS_LOADER_URL_IMPORT_1___ = require(\"../assets/ISI-Helvetica-bn.png\");\nvar ___CSS_LOADER_URL_IMPORT_2___ = require(\"../assets/NU_Wordmark_Bv.png\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\n// Module\nexports.push([module.id, \"#panel {\\n    width: 300px;\\n    position: absolute;\\n    color: black;\\n    z-index: 101;\\n    top: 20px;\\n    bottom: 40px;\\n    left: 20px;\\n    display: flex;\\n    flex-direction: column;\\n    overflow: hidden;\\n    box-shadow: 0 0 20px 0 rgba(0, 0, 0, 1);\\n    border-radius: 3px;\\n}\\n\\n#panel .hide {\\n    display: none;\\n}\\n\\n@media only screen and (max-width: 600px) {\\n\\n    #panel .hide {\\n        display: block;\\n        position: absolute;\\n        right: 13px;\\n        top: 13px;\\n        text-decoration: none;\\n        font-size: 30px;\\n        color: rgba(255, 255, 255, 0.6);\\n    }\\n\\n    #panel {    \\n        bottom: 70px;\\n    }\\n\\n    #panel.compact {\\n        bottom: auto;\\n        height: 50px;\\n    }\\n\\n    #panel.compact .panes-header {\\n        padding: 5px 20px !important;\\n    }\\n\\n    #panel h1 {\\n        bottom: auto;\\n        height: 50px;\\n    }\\n\\n}\\n\\n#panel nav {\\n    margin-top: 20px;\\n}\\n\\n\\n#panel nav a {\\n    color: rgba(255, 255, 255, 0.7);\\n    font-size: 11px;\\n    font-weight: 400;\\n    margin: 0 10px 0 0;\\n    padding: 0;\\n    display: inline-block;\\n    text-decoration: none;\\n    border-bottom: 2px solid transparent;\\n    text-transform: uppercase;\\n    letter-spacing: -0.1px;\\n}\\n\\n#panel nav a.active {\\n    font-weight: 600;\\n    color: white;\\n    border-bottom: 2px solid white;\\n} \\n\\n#panel .panes-header {\\n    padding: 20px;\\n    flex: 0 0 100px;\\n    transition: margin-left 0.1s ease-in-out;\\n    line-height: 1.6em;\\n    background-color: var(--accent);\\n    color: white;\\n    position: relative;\\n    box-shadow: 0 0 10px rgb(0 0 0 / 0.2);\\n}\\n\\n#panel .panes-header P {\\n    font-size: 14px;\\n}\\n\\n#panel .panes-header h1 {\\n    margin: 5px 0 23px 0;\\n    font-style: normal;\\n    font-weight: bold;\\n    font-size: 25px;\\n    line-height: 30px;\\n    margin-bottom: 10px;\\n}\\n\\n#panel p {\\n    margin-top:0;\\n}\\n\\n#panel .panes-wrapper {\\n    flex: 1 1 auto;\\n    overflow: hidden;\\n    width: 400%;\\n    transition: margin-left 0.5s ease-in-out;\\n    background-color: #e4e0da;\\n    font-size: 12px;\\n    display: flex;\\n}\\n\\n#panel .panes-wrapper h3 {\\n    font-size: 12px;\\n    margin: 15px 0 5px 0;\\n    font-weight: bold;\\n}\\n\\n#panel .panes-wrapper p {\\n    margin-bottom: 5px;\\n}\\n\\n#panel .panes-wrapper ol {\\n    margin: 5px 0 10px 0;\\n    padding: 0 0 0 12px;\\n}\\n\\n#panel .panes-wrapper ol li {\\n    font-weight: bold;\\n}\\n\\n#panel .panes-wrapper ol li span {\\n    font-weight: normal;\\n}\\n\\n.menuContainer div {\\n    display: inline-block;\\n}\\n\\n.menuContainer .menuLabel {\\n    width: 100%;\\n    font-size: 12px;\\n    letter-spacing: 0.3px;\\n    margin: 10px 0 -2px 0;\\n    font-weight: 600;\\n}\\n\\n.pane .close {\\n    color: white;\\n    background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\n    display: block;\\n    height: 17px;\\n    background-size: 18px;\\n    margin: -5px 0 20px 20px;\\n    flex: 0 0 19px;\\n    background-repeat: no-repeat;\\n    width: 200px;\\n    padding: 0 0 0 22px;\\n    font-size: 9px;\\n    font-family: Arial;\\n    text-decoration: none;\\n    text-transform: uppercase;\\n    background-position: 0px 1px;\\n    opacity: 0.7;\\n    letter-spacing: 0.3px;\\n    cursor: pointer;\\n}\\n\\n.pane .close:hover {\\n    opacity: 1;\\n}\\n\\n.pane.credits ul {\\n    padding: 0;\\n    list-style: none;\\n}\\n\\n.pane.credits li {\\n    margin-bottom: 5px;\\n}\\n\\n.pane.credits .author {\\n    font-weight: 500;\\n    display: block;\\n    line-height: 12px;\\n}\\n\\n.pane.credits .affiliation {\\n    display: block;\\n    color: #343332;\\n}\\n\\n.pane.credits .isilogo {\\n    background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \");\\n    height: 50px;\\n    width: 137px;\\n    background-size: 153px;\\n    background-repeat: no-repeat;\\n    background-position: center center;\\n    display: inline-block;\\n    margin-right: 15px;\\n    margin-top: 20px;\\n}\\n\\n.pane.credits .nelogo {\\n    background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \");\\n    height: 50px;\\n    width: 88px;\\n    background-size: 116px;\\n    background-repeat: no-repeat;\\n    background-position: 50% 55%;\\n    display: inline-block;\\n}\\n\\n.pane a,\\n.pane a:link,\\n.pane a:visited,\\n.pane a:active,\\n.pane a:hover {\\n    color: var(--accent);\\n}\\n\\n.lastUpdated {\\n    opacity: 0.5;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjAuMiwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyNi4xIDI2LjMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI2LjEgMjYuMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjUsMTEuNkg2LjdsOC40LTguNEwxMywxLjFsLTEyLDEybDEyLDEybDIuMS0yLjFsLTguNC04LjRIMjVWMTEuNnoiLz4KPC9zdmc+Cg==\"","export default __webpack_public_path__ + \"assets/ISI-Helvetica-bn.png?hash=0b2bb54073fa69962cbd\";","export default __webpack_public_path__ + \"assets/NU_Wordmark_Bv.png?hash=18fe602363ed3944536a\";","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./pane.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".pane {\\n    display: flex;\\n    flex-direction: column;\\n    float: left;\\n    padding: 5px 20px 20px 20px;\\n    overflow: auto;\\n    flex: 0 0 25%;\\n}\\n\\n.pane .scroll {\\n    height: calc(100% - 34px);\\n    padding: 0 20px;\\n}\\n\\n.pane .header {\\n    flex: 0 0 auto;\\n    margin: 0 5px 20px 5px;\\n}\\n\\n.pane .intro table {\\n    width: 100%;\\n    font-size: 11px;\\n    line-height: 1.4em;\\n    border-collapse: collapse;\\n    margin-bottom: 20px;\\n}\\n\\n.pane .intro table td {\\n    padding: 0;\\n}\\n\\n.pane .intro table td.value {\\n    text-align: right;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { SyncEvent } from 'ts-events';\nimport { sliderBottom } from 'd3-simple-slider';\nimport { scaleLinear, create, Selection, symbol, symbolCircle } from 'd3';\n\nimport './slider.css';\n\nexport class Slider {\n    public valueChange = new SyncEvent<number>();\n\n    private _data: number[] = [];\n    private _container: HTMLDivElement;\n    private _slider!: any;\n    private _currentValue?: number;\n    private _svg!: Selection<SVGSVGElement, undefined, null, undefined>;\n\n    public constructor(container: HTMLDivElement) {\n        this._container = container;\n        this._init();\n    }\n\n    public setData(data: number[]): void {\n        this._data = data;\n        this._update();\n    }\n\n    public setCurrentValue(value: number): void {\n        this._currentValue = value;\n        this._update();\n    }\n\n    public setLabelFn(value: (v: number) => string): void {\n        this._labelFn = value;\n        this._update();\n    }\n\n    public _update(): void {\n        this._slider\n            .max(this._data.length - 1)\n            .value(this._currentValue ? this._getIndexByValue(this._currentValue) : 0)\n            .marks(this._data.map((d, i) => i))\n            .tickFormat((d: number) => this._labelFn(this._data?.[d]))\n            .displayFormat((d: number) => this._labelFn(this._data?.[d]))\n            .tickValues(this._data.map((d, i) => i))\n            .displayValue(true);\n        this._svg.call(this._slider);\n        this._adjustSlider();\n    }\n\n    private _init(): void {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'dropdown';\n\n        this._slider = sliderBottom(scaleLinear())\n            .min(0)\n            .width(230)\n            .displayValue(true)\n            .handle(\n                symbol()\n                    .type(symbolCircle)\n                    .size(80)(),\n            )\n            .on('onchange', (d: number) => this._onSliderChange(d));\n\n        this._svg = create('svg')\n            .attr('viewBox', '-15, -10, 260, 40')\n            .attr('width', 260)\n            .attr('height', 40)\n            .call(this._slider);\n\n        wrapper.appendChild(this._svg.node()!);\n        this._container.appendChild(wrapper);\n    }\n\n    private _onSliderChange(d: number): void {\n        this.valueChange.post(this._data[d]);\n    }\n\n    private _getIndexByValue(value: number): number {\n        return this._data.findIndex(v => v === value);\n    }\n\n    private _adjustSlider(): void {\n        this._svg\n            .selectAll('.tick line')\n            .attr('y2', 1)\n            .attr('y1', -1)\n            .attr('stroke', 'black');\n        this._svg\n            .selectAll('.tick text')\n            .attr('y', 5)\n            .attr('fill', 'black');\n        this._svg.selectAll('.handle').attr('tabindex', null);\n        this._svg.selectAll('g.parameter-value line').attr('opacity', 0);\n        this._svg.selectAll('g.parameter-value text').attr('y', 12);\n    }\n\n    private _labelFn = (d: number): string => d.toString();\n}\n","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./slider.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".dropdown svg {\\n    margin: 0 -5px;\\n}\\n\\nline.track {\\n    stroke-width: 0;\\n}\\n\\nline.track-inset {\\n    stroke-width: 3;\\n    stroke: black;\\n}\\n\\ng.parameter-value .handle {\\n    stroke-width: 2;\\n    fill: var(--accent);\\n    stroke: #e4e0da;\\n    transform: translateX(0.5px);\\n}\\n\\ng.parameter-value text {\\n    color: black;\\n    font-weight: bold;\\n}\\n\\ng.tick text {\\n    color: black;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { Model } from '../model/Model';\nimport { Config } from '../model/Config';\n// import { Plot } from './Plot';\nimport { htmlToElement } from '../utils/htmlToElement';\n\nimport tmpl from './popup.html';\nimport './popup.css';\n// import { Entity } from '../model/Entity';\nimport { formatPercent } from '../utils/format';\nimport { format } from 'd3';\n\nexport class Popup {\n    private _model: Model;\n    private _config: Config;\n    private _container: HTMLElement;\n\n    private _popup!: HTMLDivElement;\n    private _title!: HTMLSpanElement;\n    private _chart!: HTMLDivElement;\n    private _riskValue!: HTMLSpanElement;\n    private _casesLabel!: HTMLSpanElement;\n    private _casesValue!: HTMLSpanElement;\n    // private _adjCasesLabel!: HTMLSpanElement;\n    // private _adjCasesValue!: HTMLSpanElement;\n    private _popLabel!: HTMLSpanElement;\n    private _popValue!: HTMLSpanElement;\n    private _riskLabel!: HTMLSpanElement;\n    // private _plot!: Plot;\n\n    public constructor(container: HTMLElement, model: Model, config: Config) {\n        this._container = container;\n        this._model = model;\n        this._config = config;\n\n        this._model.hoveredProvinceIDChanged.attach(() => this.update());\n        this._model.factorChanged.attach(() => this.update());\n        this._model.currentDateChanged.attach(() => this.update());\n        this._model.eventSizeChanged.attach(() => this.update());\n        this._model.infectivityPeriodChanged.attach(() => this.update());\n        this._init();\n        this._setVisible(true);\n    }\n\n    public update(): void {\n        const date = this._model.getCurrentDate();\n        const factor = this._model.getFactor();\n        const infectivityPeriod = this._model.getInfectivityPeriod();\n        const eventSize = this._model.getEventSize();\n        const entity = this._model.getHoveredProvince();\n        if (entity) {\n            const value = entity.getRisk(date, eventSize, infectivityPeriod, factor);\n            this._title.innerHTML = `${entity.label}`;\n\n            this._riskLabel.innerHTML = `Probabilità che sia presente almeno un infetto<br>\n                                         in un gruppo di ${format(',')(eventSize)} persone:`;\n            this._riskValue.innerText = value ? formatPercent(value) : 'N. D.';\n\n            this._casesLabel.innerText = `Infezioni rilevate (${infectivityPeriod}gg):`;\n            const activeCases = entity.getActiveCasesSinceDays(date, infectivityPeriod);\n            this._casesValue.innerText = activeCases ? `${format(',')(activeCases)} casi` : 'N. D.';\n            // this._adjCasesLabel.innerText = `Infezioni stimate:`;\n            // this._adjCasesValue.innerText = format(',')(factor * entity.getTotalCases(date)!);\n            this._popLabel.innerText = `Popolazione:`;\n            this._popValue.innerText = `${format(',')(entity.getPopulation())} persone`;\n            // this._plot.setScaleType('logarithmic');\n            // this._plot.setEventSize(eventSize);\n            // this._plot.setInfectivityPeriod(infectivityPeriod);\n            // this._plot.setFactor(factor);\n            // this._plot.setEntity(entity as Entity);\n            // // this._plot.setExtent(extent);\n            // this._plot.update();\n            this._setVisible(true);\n        } else {\n            this._setVisible(false);\n        }\n    }\n\n    private _init(): void {\n        this._popup = htmlToElement(tmpl) as HTMLDivElement;\n        this._container.appendChild(this._popup);\n\n        this._title = this._popup.querySelector('.title') as HTMLSpanElement;\n        this._chart = this._popup.querySelector('.chart') as HTMLDivElement;\n        // this._plot = new Plot(this._chart, this._model, this._config);\n        // this._plot.setSize([290, 100]);\n        // this._plot.setTicks(5);\n        this._riskLabel = this._popup.querySelector('.total .riskLabel') as HTMLSpanElement;\n        this._riskValue = this._popup.querySelector('.total .risk') as HTMLSpanElement;\n        this._casesLabel = this._popup.querySelector('.details .casesLabel') as HTMLSpanElement;\n        this._casesValue = this._popup.querySelector('.details .cases') as HTMLSpanElement;\n        // this._adjCasesLabel = this._popup.querySelector('.details .adjCasesLabel') as HTMLSpanElement;\n        // this._adjCasesValue = this._popup.querySelector('.details .adjCases') as HTMLSpanElement;\n        this._popLabel = this._popup.querySelector('.details .popLabel') as HTMLSpanElement;\n        this._popValue = this._popup.querySelector('.details .pop') as HTMLSpanElement;\n    }\n\n    private _setVisible(visible: boolean): void {\n        this._popup.classList.toggle('visible', visible);\n    }\n}\n","module.exports = \"<div id=\\\"popup\\\">\\n    <div>\\n        <span class=\\\"title\\\"></span>\\n    </div>\\n    <div class=\\\"total\\\">\\n        <span class=\\\"riskLabel\\\"></span>\\n        <span class=\\\"risk\\\"></span>\\n    </div>\\n    <div class=\\\"details\\\">\\n        <span class=\\\"casesLabel\\\"></span>\\n        <span class=\\\"cases\\\"></span><br>\\n        <!-- <span class=\\\"adjCasesLabel\\\"></span>\\n        <span class=\\\"adjCases\\\"></span><br> -->\\n        <span class=\\\"popLabel\\\"></span>\\n        <span class=\\\"pop\\\"></span>\\n    </div>\\n</div>\\n\";","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./popup.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#popup {\\n    position: absolute;\\n    top: 20px;\\n    right: 20px;\\n    width: 300px;\\n    background-color: var(--accent);\\n    color: white;\\n    z-index: 9;\\n    font-size: 12px;\\n    padding: 10px;\\n    line-height: 1.6em;\\n    opacity: 0;\\n    box-shadow: 0 0 0 0 rgba(0,0,0,1);\\n    transition: box-shadow, opacity 1s;\\n    pointer-events: none;\\n    border-radius: 3px;\\n}\\n\\n#popup.visible {\\n    opacity: 1;\\n    box-shadow: 0 0 20px 0 rgba(0,0,0,0.3);\\n}\\n\\n\\n#popup .title {\\n    color: white;\\n    text-transform: uppercase;\\n    font-weight: bold;\\n    margin-bottom: 5px;\\n    display: block;\\n}\\n\\n#popup .details {    \\n    line-height: 15px;\\n}\\n\\n#popup .total {    \\n    margin: 5px 0;\\n    line-height: 15px;\\n}\\n\\n#popup .total .riskLabel {\\n    font-weight: bold;\\n    text-transform: initial;\\n}\\n\\n#popup .details {\\n    opacity: 0.7;\\n}\\n\\n\\n#popup .risk {\\n    font-weight: bold;\\n    opacity: 0.7;\\n}\\n\\n\\n@media only screen and (max-width: 600px) {\\n\\n    #popup {\\n        position: absolute;\\n        top: 80px;\\n        left: 20px;\\n        width: 300px;\\n    }\\n\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { COLOR_SCALE } from '../utils/colorScale';\nimport { Model } from '../model/Model';\nimport { Config } from '../model/Config';\n\nimport { Selection, select } from 'd3-selection';\nimport { ScaleLinear, scaleLinear } from 'd3-scale';\n\nimport tippy from 'tippy.js';\nimport 'tippy.js/dist/tippy.css';\n\nimport './legend.css';\nimport { formatPercent } from '../utils/format';\n\nexport class Legend {\n    private _margins: [number, number, number, number] = [1, 15, 1, 15];\n    private _size: [number, number] = [330, 22];\n\n    private _model: Model;\n    private _config: Config;\n    private _container: HTMLElement;\n    private _svg!: Selection<SVGGElement, unknown, null, undefined>;\n    private _rectsScale!: ScaleLinear<number, number>;\n\n    private _labelsContainer!: Selection<SVGGElement, unknown, null, undefined>;\n    private _rectsContainer!: Selection<SVGGElement, unknown, null, undefined>;\n    private _border!: Selection<SVGRectElement, unknown, null, undefined>;\n\n    private _plot!: HTMLDivElement;\n\n    public constructor(container: HTMLElement, model: Model, config: Config) {\n        this._container = container;\n        this._model = model;\n        this._config = config;\n\n        this._model.currentDateChanged.attach(this, this.update);\n        this._model.infectivityPeriodChanged.attach(this, this.update);\n        this._model.eventSizeChanged.attach(this, this.update);\n        this._model.factorChanged.attach(this, this.update);\n        this._init();\n    }\n\n    public update(): void {\n        if (!this._model.isReady) return;\n\n        const mainTicks = COLOR_SCALE.getTicks();\n        const mainLabels = COLOR_SCALE.getLabels();\n        this._rectsScale.domain([0, mainTicks.length]);\n\n        this._rectsContainer\n            .selectAll<SVGRectElement, number>('rect.axis')\n            .data(mainTicks)\n            .join('rect')\n            .classed('axis', true)\n            .attr('fill', d => COLOR_SCALE.getHexAtValue(d))\n            .attr('x', (d, i) => this._rectsScale(i))\n            .attr('width', this._rectsScale(1) - this._rectsScale(0) - 1)\n            .attr('y', 15)\n            .attr('height', 5);\n        // .on('mouseover', (d, i, g) => this._showTooltip(d, g[i]));\n\n        this._labelsContainer\n            .selectAll<SVGTextElement, number>('text.axis')\n            .data(mainLabels)\n            .join('text')\n            .classed('axis', true)\n            .attr('x', (d, i) => this._rectsScale(i))\n            .attr('y', 10)\n            .text(d => d);\n    }\n\n    private _init(): void {\n        this._plot = document.createElement('div');\n        this._plot.className = 'legend';\n        this._container.appendChild(this._plot);\n        this._buildPlot();\n    }\n\n    private _buildPlot(): void {\n        this._svg = select(this._plot)\n            .append('svg')\n            .attr('width', this._size[0])\n            .attr('height', this._size[1])\n            .append('g')\n            .attr('transform', `translate(${this._margins[3]},${this._margins[0]})`)\n            .style('shape-rendering', 'crispEdges');\n\n        this._rectsContainer = this._svg.append('g');\n        this._labelsContainer = this._svg.append('g');\n        this._border = this._svg\n            .append('rect')\n            .attr('stroke', 'rgba(0, 0, 0, 0.3)')\n            .attr('fill', 'transparent')\n            .attr('x', 0)\n            .attr('y', 15)\n            .attr('width', this._size[0] - this._margins[1] - this._margins[3])\n            .attr('height', 5);\n\n        this._rectsScale = scaleLinear()\n            .domain([0, 1])\n            .range([0, this._size[0] - this._margins[1] - this._margins[3]]);\n    }\n\n    private _showTooltip(value: number, element: SVGRectElement): void {\n        tippy(element, { theme: 'small' });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (element as any)._tippy.setContent(`${formatPercent(value)}`);\n    }\n}\n","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./legend.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".legend {\\n    position: absolute;\\n    bottom: 33px;\\n    right: 5px;\\n    z-index: 9;\\n    user-select: none;\\n}\\n\\n.legend circle {\\n    fill: black;\\n    opacity: 0.5;\\n}\\n\\n.legend circle.hovered {\\n    fill: white;\\n}\\n\\n.legend text.axis {\\n    font-size: 10px;\\n    font-weight: bold;\\n    fill: #ebcbea;\\n    pointer-events: none;\\n    text-anchor: middle;\\n}\\n\\n\\n.tippy-tooltip.legend-theme {\\n    background-color: #ff2b68;\\n    color: white;\\n    font-size: 11px;\\n    border-radius: 3px;\\n    padding: 10px;\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\\n}\\n\\n.tippy-tooltip.legend-theme[data-placement^='top'] .tippy-arrow {\\n    border-top-color: #ff2b68;\\n}\\n.tippy-tooltip.legend-theme[data-placement^='bottom'] .tippy-arrow {\\n    border-bottom-color: #ff2b68;\\n}\\n.tippy-tooltip.legend-theme[data-placement^='left'] .tippy-arrow {\\n    border-left-color: #ff2b68;\\n}\\n.tippy-tooltip.legend-theme[data-placement^='right'] .tippy-arrow {\\n    border-right-color: #ff2b68;\\n}\\n\\n@media only screen and (max-width: 600px) {\\n\\n    .legend {\\n        right: auto;\\n        left: 5px;\\n    }\\n\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./app.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"./assets/isi.png\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap);\"]);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\nexports.push([module.id, \":root {\\n    --blue: #007bff;\\n    --indigo: #6610f2;\\n    --purple: #6f42c1;\\n    --pink: #e83e8c;\\n    --red: #dc3545;\\n    --orange: #fd7e14;\\n    --yellow: #ffc107;\\n    --green: #28a745;\\n    --teal: #20c997;\\n    --cyan: #17a2b8;\\n    /* --accent: #b61aae; */\\n    --accent: #7068a0;\\n}\\n\\n* {\\n    box-sizing: border-box;\\n}\\n\\nbody, html {\\n    background-color: #191a1a;\\n    width: 100%;\\n    height: 100%;\\n    margin: 0;\\n    overflow: hidden;\\n    font-family: 'Inter', sans-serif;\\n    font-size: 12px;\\n    line-height: 21px;\\n    letter-spacing: -0.02em;\\n}\\n\\n.brand {\\n    background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\n    background-size: 40px auto;\\n    background-repeat: no-repeat;\\n    padding: 3px 0 0 47px;\\n    width: 150px;\\n    height: 30px;\\n    left: 340px;\\n    top: 30px;\\n    z-index: 1;\\n    position: absolute;\\n    color: white;\\n    font-weight: normal;\\n    font-size: 10px;\\n    letter-spacing: 0.6px;\\n    font-family: arial;\\n    opacity: 0.7;\\n}\\n\\n.brand:hover {\\n    cursor: pointer;\\n    opacity: 1;\\n}\\n\\n@media only screen and (max-width: 810px) {\\n    .brand {\\n        display: none;\\n    }\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAoCAYAAABKOyzUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkREQkM5NjhBNDM5NDExRTY4NEQ3OUFDNjI0QzhFODBDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkREQkM5NjhCNDM5NDExRTY4NEQ3OUFDNjI0QzhFODBDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RERCQzk2ODg0Mzk0MTFFNjg0RDc5QUM2MjRDOEU4MEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RERCQzk2ODk0Mzk0MTFFNjg0RDc5QUM2MjRDOEU4MEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz74zgkDAAAKXElEQVR42tya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\""],"sourceRoot":""}